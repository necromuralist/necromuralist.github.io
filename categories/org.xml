<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts about org)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/categories/org.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2022 &lt;a href="mailto:cloisteredmonkey.jmark@slmail.me"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Tue, 01 Nov 2022 02:22:50 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Tangling Multiple Org Files</title><link>https://necromuralist.github.io/posts/tangling-multiple-org-files/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#orgc46e6fd"&gt;The Steps&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#orgad4a1b1"&gt;Create one.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#org7f56982"&gt;Create two.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#orgac5fe93"&gt;Export one.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#orgb5dde53"&gt;Tangle one.org.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/tangling-multiple-org-files/#org09e45ce"&gt;Sources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;
I've been looking off and on for ways to combine separate code-blocks in org-mode into a single tangled file. I wanted to use it because I tangle code that I want to re-use out of posts but then if I want to break the posts up I need to create a separate file (tangle) for each post. I'm hopeful that this method will allow me to break up a tangle across multiple posts. I've only tried it on toy files but I want to get some initial documentation for it in place.
&lt;/p&gt;
&lt;div id="outline-container-orgc46e6fd" class="outline-2"&gt;
&lt;h2 id="orgc46e6fd"&gt;The Steps&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc46e6fd"&gt;
&lt;p&gt;
Let's say that there are two source org-files:
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;code&gt;one.org&lt;/code&gt;: contains the tangle block and a source block&lt;/li&gt;
&lt;li&gt;&lt;code&gt;two.org&lt;/code&gt;: contains another block that we want to tangle with the one in &lt;code&gt;one.org&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
The steps are:
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Put an &lt;code&gt;#+INCLUDE&lt;/code&gt; directive to include &lt;code&gt;two.org&lt;/code&gt; into &lt;code&gt;one.org&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Export &lt;code&gt;one.org&lt;/code&gt; to an &lt;code&gt;org&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;Open the exported org file (&lt;code&gt;one.org.org&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Tangle it.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgad4a1b1" class="outline-3"&gt;
&lt;h3 id="orgad4a1b1"&gt;Create one.org&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgad4a1b1"&gt;
&lt;p&gt;
The file &lt;code&gt;one.org&lt;/code&gt; is going to have the tangle and the first source-block:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#+begin_src python :tangle ~/test.py :exports none
&amp;lt;&amp;lt;block-one&amp;gt;&amp;gt;

&amp;lt;&amp;lt;block-two&amp;gt;&amp;gt;
#+end_src
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#+begin_src python :noweb-ref block-one
def one():
    print("One")
#+end_src
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
We also need to include what's in the second file (&lt;code&gt;two.org&lt;/code&gt;). The code we want to include is in a section called &lt;code&gt;Two&lt;/code&gt; so we can include just that section by adding a search term at the end.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#+INCLUDE: "./two.org::*Two"
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org7f56982" class="outline-3"&gt;
&lt;h3 id="org7f56982"&gt;Create two.org&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7f56982"&gt;
&lt;p&gt;
In the other file add the section header to match the &lt;code&gt;INCLUDE&lt;/code&gt; search term (&lt;code&gt;*Two&lt;/code&gt;) and put a code block with a reference named &lt;code&gt;block-two&lt;/code&gt; to match what's in the tangle block above.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* Two
#+begin_src python :noweb-ref block-two
def two():
print("Two")
#+end_src
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgac5fe93" class="outline-3"&gt;
&lt;h3 id="orgac5fe93"&gt;Export one.org&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgac5fe93"&gt;
&lt;p&gt;
Tangling unfortunately ignores the &lt;code&gt;INCLUDE&lt;/code&gt; directive so we have to export it first to another org-file in order to get the text from &lt;code&gt;org.two&lt;/code&gt; into our source file. By default, exporting to &lt;code&gt;org&lt;/code&gt; is disabled so you need to enable it (e.g. starting with &lt;code&gt;M-x customize&lt;/code&gt; &lt;code&gt;org-export-backends&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
Once it's enabled you can export &lt;code&gt;one.org&lt;/code&gt; to an org-mode file using &lt;code&gt;C-c C-e O v&lt;/code&gt; (the default name will be &lt;code&gt;one.org.org&lt;/code&gt;). 
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb5dde53" class="outline-3"&gt;
&lt;h3 id="orgb5dde53"&gt;Tangle one.org.org&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgb5dde53"&gt;
&lt;p&gt;
The last choice when we exported the file in the previous step (&lt;code&gt;v&lt;/code&gt;) will save it to a file and open it up in an emacs buffer. When the buffer is open you can then tangle it (&lt;code&gt;C-c C-v C-t&lt;/code&gt;) and the output (&lt;code&gt;/test.py&lt;/code&gt; from our tangle block) should contain both of our functions.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org09e45ce" class="outline-2"&gt;
&lt;h2 id="org09e45ce"&gt;Sources&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org09e45ce"&gt;
&lt;p&gt;
This is where I got the information on breaking up the files. It includes some emacs-lisp to run the steps automatically (although I didn't try it):
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;Multi-File Org-Babel Tangles with Include Directives [Internet]. DEV Community. [cited 2022 Mar 21]. Available from: &lt;a href="https://dev.to/jfhbrook/multi-file-org-babel-tangles-with-include-directives-5522"&gt;https://dev.to/jfhbrook/multi-file-org-babel-tangles-with-include-directives-5522&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
This is the post that mentions that exporting org-files to org-format needs to be enabled (and how to do it):
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;exporting - Org mode export subtree to new org file - option missing? [Internet]. Emacs Stack Exchange. [cited 2022 Mar 21]. Available from: &lt;a href="https://emacs.stackexchange.com/a/70453"&gt;https://emacs.stackexchange.com/a/70453&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
This is the manual page explaining the search syntax (which is what the &lt;code&gt;#+INCLUDE&lt;/code&gt; format uses).
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;Search Options (The Org Manual) [Internet]. [cited 2022 Mar 21]. Available from: &lt;a href="https://orgmode.org/manual/Search-Options.html"&gt;https://orgmode.org/manual/Search-Options.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
This explains the &lt;code&gt;#+INCLUDE&lt;/code&gt; directive options:
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;Include Files (The Org Manual) [Internet]. [cited 2022 Mar 21]. Available from: &lt;a href="https://orgmode.org/manual/Include-Files.html"&gt;https://orgmode.org/manual/Include-Files.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>emacs</category><category>literate programming</category><category>org</category><guid>https://necromuralist.github.io/posts/tangling-multiple-org-files/</guid><pubDate>Tue, 22 Mar 2022 00:30:14 GMT</pubDate></item><item><title>Javascript in Org-Babel</title><link>https://necromuralist.github.io/posts/javascript-in-org-babel/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#orgba9ff92"&gt;Beginning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org1212204"&gt;Middle&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#orga77767f"&gt;Prerequites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org13349dc"&gt;init.el&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org40bf169"&gt;Try It&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#orgd721466"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgba9ff92" class="outline-2"&gt;
&lt;h2 id="orgba9ff92"&gt;Beginning&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgba9ff92"&gt;
&lt;p&gt;
This is a test of running javascript in org-babel blocks. For some reason I couldn't find any documentation about setting it up so this is also a place for me to collect what to do.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; I actually did use &lt;a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-js.html"&gt;this org-babel page&lt;/a&gt; for some of it, but it wasn't enough for me to really figure out what was going on.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1212204" class="outline-2"&gt;
&lt;h2 id="org1212204"&gt;Middle&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org1212204"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga77767f" class="outline-3"&gt;
&lt;h3 id="orga77767f"&gt;Prerequites&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orga77767f"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3cc9b39" class="outline-4"&gt;
&lt;h4 id="org3cc9b39"&gt;Node&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org3cc9b39"&gt;
&lt;p&gt;
Since javascript is an interpreted language you need an interpreter to run code blocks. Org-babel assumes you're using &lt;a href="https://nodejs.org/en/"&gt;node.js&lt;/a&gt; so you need to install it and make sure it's on the &lt;code&gt;PATH&lt;/code&gt;. They do support debian-based systems (including Ubuntu, which I use) but they don't use the traditional PPA system. Instead they have different installs for the different versions - but they do have a Long-Term Support (LTS) version which I'm hoping updates so that's what I installed.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -sL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
As of this writing it install version 12.19.0, versus the Ubuntu 20.04 version of 10.19.0.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org13349dc" class="outline-3"&gt;
&lt;h3 id="org13349dc"&gt;init.el&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org13349dc"&gt;
&lt;p&gt;
Besides installing node you have to make sure that you add &lt;code&gt;js&lt;/code&gt; to your org-babel set up.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(org-babel-do-load-languages
 'org-babel-load-languages
 '((js . t)))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
If you already have other languages added this just goes in the same block.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(org-babel-do-load-languages
 'org-babel-load-languages
 '((plantuml . t)
   (shell . t)
   (emacs-lisp . t)
   (latex . t)
   (ditaa . t)
   (js . t)
   (python . t)
   (jupyter . t)
   ))
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org40bf169" class="outline-3"&gt;
&lt;h3 id="org40bf169"&gt;Try It&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org40bf169"&gt;
&lt;p&gt;
Now that it's set up you can execute javascript in org-babel code blocks, designating them as &lt;code&gt;js&lt;/code&gt; blocks (e.g. &lt;code&gt;#+begin_src js :results output :exports both&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
Here's a simple output block.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"test"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
test
&lt;/pre&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'apple'&lt;/span&gt;
&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'banana'&lt;/span&gt;
&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
apple
applebanana
&lt;/pre&gt;


&lt;p&gt;
One thing to note is that this doesn't seem create sessions that persist across blocks. Even though I defined &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; in the previous block, this next block raises an error because it doesn't think I've defined &lt;code&gt;y&lt;/code&gt;.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
If you try and put a session argument in the org-babel header you'll get a message saying "Session evaluation with node.js not supported". According to the &lt;a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-js.org.html"&gt;org-babel-js documentation&lt;/a&gt; you can put in special headers to run the code in an alternate REPL, but I tried it and the output ends up in a separate buffer rather than showing up in the org-document, which seems to kind of lessen the usefulness of it. Also the js-comint version dumps extra text into the REPL as well.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgd721466" class="outline-2"&gt;
&lt;h2 id="orgd721466"&gt;End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgd721466"&gt;
&lt;p&gt;
Okay, so this was a very basic hello world for javascript in emacs. The lack of sessions is kind of disappointing, but I don't know how useful this is going to be, anyway, since javascript is so tied to the browser, but there it is.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>emacs</category><category>javascript</category><category>org</category><guid>https://necromuralist.github.io/posts/javascript-in-org-babel/</guid><pubDate>Sat, 17 Oct 2020 03:48:55 GMT</pubDate></item></channel></rss>