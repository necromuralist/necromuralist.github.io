<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<base href="https://necromuralist.github.io/blog/">
<meta name="description" content="A notebook of things.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Cloistered Monkey</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/blog/">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://necromuralist.github.io/">

                <span id="blog-title">The Cloistered Monkey</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../categories/">Tags</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>
                </li>
<li>
<a href="#">Blog</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu"><li>
<a href="../machine-learning-projects/">Machine Learning</a>
            </li></ul>
</li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="converting-nikola-from-a-blog-to-a-site/" class="u-url">Converting Nikola from a Blog to a Site</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="converting-nikola-from-a-blog-to-a-site/" rel="bookmark"><time class="published dt-published" datetime="2016-03-02T12:53:31-08:00" title="2016-03-02 12:53">2016-03-02 12:53</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>These are my notes on converting this site to be a web-site first (with a blog on the side). There is an official page on <a class="reference external" href="https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html">creating a site instead of a blog</a>, but I had a little bit of a hard time figuring out what was going on so these are the main points in case I need to do it again.</p>
<p>In a nutshell:</p>
<blockquote>
<ol class="arabic simple">
<li>Get rid of the sub-folder argument in the <tt class="docutils literal">PAGES</tt> variable in <tt class="docutils literal">conf.py</tt>
</li>
<li>Set <tt class="docutils literal">INDEX_PATH</tt> to point to the <cite>posts</cite> sub-folder</li>
<li>Create an index page for the site.</li>
</ol>
</blockquote>
<div class="section" id="conf-py">
<h2>conf.py</h2>
<p>The main things to do are to edit the <cite>conf.py</cite> file so that the pages you create get copied over as the root of the <cite>output</cite> folder (instead of in a sub-folder called <cite>stories</cite>) and moving the blog-index down into a sub-folder.</p>
<div class="section" id="making-stories-the-site">
<h3>Making 'stories' the Site</h3>
<p>To make the pages you create the root of the site you need to change the <tt class="docutils literal">PAGES</tt> variable to not have a sub-folder as the target (this is the second-entry in the tuple). So if it originally was:</p>
<pre class="code python"><a name="rest_code_fcaa2664bb434aae9854ba40d1c20c4c-1"></a><span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_fcaa2664bb434aae9854ba40d1c20c4c-2"></a>    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<a name="rest_code_fcaa2664bb434aae9854ba40d1c20c4c-3"></a><span class="p">)</span>
</pre>
<p>You would change the second value in the tuple to an empty string:</p>
<pre class="code python"><a name="rest_code_a533aac3cbc64d80924769735c08e9bd-1"></a><span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_a533aac3cbc64d80924769735c08e9bd-2"></a>    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<a name="rest_code_a533aac3cbc64d80924769735c08e9bd-3"></a><span class="p">)</span>
</pre>
<p>Now when you build the site (<tt class="docutils literal">nikola build</tt>) the <tt class="docutils literal">output</tt> folder will have your 'stories' at the top-level. This means that when you refer to pages (e.g. in the navigation configuration) you don't add 'stories/' as a prefix anymore.</p>
</div>
<div class="section" id="moving-the-blog-index">
<h3>Moving the Blog-index</h3>
<p>Since Nikola assumes that the blog is your main-page you need to tell it to create the index in a sub-folder by setting the <tt class="docutils literal">INDEX_PATH</tt> to the name of the sub-folder. If, for example, the blog-posts are being put into <tt class="docutils literal">posts</tt>, the setting would be:</p>
<pre class="code python"><a name="rest_code_f23223750fc3465aa2f4f653f9104fbc-1"></a><span class="n">INDEX_PATH</span> <span class="o">=</span> <span class="s2">"posts"</span>
</pre>
</div>
</div>
<div class="section" id="creating-the-home-page">
<h2>Creating the Home Page</h2>
<p>At this point if you build the site and navigate to it you'll find that your home-page is now a directory of your <tt class="docutils literal">output</tt> folder. You can navigate to a page by going through the folders, but this is probably not the intended way to get around. The easiest way (that I found) to create the home-page is to create a new-page (<tt class="docutils literal">nikola new_page</tt>) and when prompted for a title, call it <tt class="docutils literal">index</tt>. This will create <tt class="docutils literal">stories/index.rst</tt> which you can edit to become your home page (make sure to change the title if you don't want the page headline to be 'index').</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="processing_test/" class="u-url">A P5 (Processing) Test</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="processing_test/" rel="bookmark"><time class="published dt-published" datetime="2016-03-02T00:00:00-08:00" title="2016-03-02 00:00">2016-03-02 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>This is a <a class="reference external" href="http://p5js.org/">p5</a> test based on their <a class="reference external" href="http://p5js.org/get-started/">get started</a> tutorial. It's also an indirect test of using the <cite>raw</cite> directive to write HTML to pass to <cite>nikola</cite>.</p>
<p>First the link to the library.</p>
<pre class="code html"><a name="rest_code_cb27da452b84429790de4e106807e9d4-1"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.21/p5.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.21/p5.js"></script><p>And now the sketch.</p>
<pre class="code html"><a name="rest_code_789dfd221e8c422599704b64f41e7f75-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"get_started"</span><span class="p">&gt;</span>
<a name="rest_code_789dfd221e8c422599704b64f41e7f75-2"></a>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">language</span><span class="o">=</span><span class="s">"javascript"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="o">=</span><span class="s">'get_started.js'</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_789dfd221e8c422599704b64f41e7f75-3"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre>
<div id="get_started">
<script language="javascript" type="text/javascript" src="processing_test/get_started.js"></script>
</div>
<pre class="code javascript"><a name="rest_code_78a738e1080a41359e1e9be85c8685e0-1"></a><span class="kd">var</span> <span class="nx">diameter</span><span class="p">;</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-2"></a>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-3"></a><span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-4"></a>    <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">createCanvas</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="nx">windowWidth</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-5"></a>    <span class="nx">canvas</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s2">"get_started"</span><span class="p">)</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-6"></a>    <span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-7"></a>    <span class="nx">strokeWeight</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-8"></a>    <span class="nx">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-9"></a>    <span class="nx">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-10"></a><span class="p">}</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-11"></a>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-12"></a><span class="kd">function</span> <span class="nx">mousePressed</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-13"></a>    <span class="cm">/* set background to blue */</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-14"></a>    <span class="nx">background</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-15"></a><span class="p">}</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-16"></a>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-17"></a><span class="kd">function</span> <span class="nx">mouseReleased</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-18"></a>    <span class="cm">/* set background to white */</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-19"></a>    <span class="nx">background</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-20"></a><span class="p">}</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-21"></a>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-22"></a><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-23"></a>    <span class="cm">/* Draw circles that change diameter based on mouse speed */</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-24"></a>    <span class="cm">/* and color based on if mouse-pressed (or not pressed)   */</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-25"></a>    <span class="k">if</span> <span class="p">(</span><span class="nx">mouseIsPressed</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-26"></a>        <span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-27"></a>        <span class="nx">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-28"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-29"></a>        <span class="nx">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-30"></a>        <span class="nx">stroke</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-31"></a>    <span class="p">}</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-32"></a>    <span class="nx">diameter</span> <span class="o">=</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">dist</span><span class="p">(</span><span class="nx">pmouseX</span><span class="p">,</span> <span class="nx">pmouseY</span><span class="p">,</span> <span class="nx">mouseX</span><span class="p">,</span> <span class="nx">mouseY</span><span class="p">),</span> <span class="mf">1.5</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-33"></a>    <span class="nx">ellipse</span><span class="p">(</span><span class="nx">mouseX</span><span class="p">,</span> <span class="nx">mouseY</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">,</span> <span class="nx">diameter</span><span class="p">);</span>
<a name="rest_code_78a738e1080a41359e1e9be85c8685e0-34"></a><span class="p">}</span>
</pre>
<div class="section" id="notes">
<h2>Notes</h2>
<p>This was a little harder than I thought it would be. First, regarding the javascript file:</p>
<ul class="simple">
<li>In order to get it to the final HTML you need to create a folder with the same name as this post's file (<cite>processing_test.rst</cite>) without extension  within the <cite>files</cite> folder and put the javascript there (<cite>files/posts/processing_test/get_started.js</cite>).</li>
<li>to get the sketch to stay in the post (instead of showing up on the bottom of the page), you have to use the div trick -- create a <cite>div</cite> where you want the sketch and give it a unique ID, then set the parent in the sketch (<tt class="docutils literal"><span class="pre">canvas.parent("get_started")</span></tt> in this example). I don't really like giving the <cite>div</cite> an <cite>id</cite> in the post and then referring to it in the javascript, but it seems to work.</li>
<li>The <cite>windowWidth</cite> isn't actually constraining the width of the sketch the way I thought it would. Need to look into that.</li>
</ul>
</div>
</div>
    </div>
    </article>
</div>







        </div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2016         <a href="mailto:necromuralist@gmail.com">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(1, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
