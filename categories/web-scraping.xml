<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts about web-scraping)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/categories/web-scraping.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2023 &lt;a href="mailto:cloisteredmonkey.jmark@slmail.me"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Thu, 04 May 2023 00:33:53 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Selenium To Soup To Pandas</title><link>https://necromuralist.github.io/posts/selenium-to-soup-to-pandas/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;p&gt;
&lt;a href="https://pandas.pydata.org/"&gt;Pandas&lt;/a&gt; has a &lt;a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_html.html"&gt;read_html&lt;/a&gt; function that will automatically convert HTML tables that it finds into DataFrames, but if you need to do a little cleaning up of the tables first or are doing some exploration of the HTML it can be useful to work with it in &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#"&gt;Beautiful Soup&lt;/a&gt; first, and if the table is being rendered on the page with Javascript it can be useful to use &lt;a href="https://www.selenium.dev/selenium/docs/api/py/index.html"&gt;Selenium&lt;/a&gt; to grab the page for you so that it's rendered.
&lt;/p&gt;

&lt;p&gt;
Start selenium (headless) and grab the page.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
Give it to Beautiful Soup.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
Do stuff with the soup (not shown).
&lt;/p&gt;

&lt;p&gt;
Optionally grab the table you want - in this case I want the last one.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
But if there's one or you just want the first one you could use &lt;code&gt;find&lt;/code&gt; instead.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
Pass it to pandas.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
&lt;code&gt;tables&lt;/code&gt; is a list of DataFrames - one for each table that pandas found - even if there's only one so now it might be useful to get the one you want.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
From what I understand from the documentation, pandas is using Beautiful Soup to parse the HTML, so if the tables come out okay and you don't need to mess around with the HTML tree beforehand you can just skip the soup.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;</description><category>beautiful soup</category><category>html</category><category>pandas</category><category>selenium</category><category>slipnote</category><category>web-scraping</category><guid>https://necromuralist.github.io/posts/selenium-to-soup-to-pandas/</guid><pubDate>Thu, 06 Aug 2020 00:18:54 GMT</pubDate></item><item><title>Smoothing Out a Beautiful Soup Tree</title><link>https://necromuralist.github.io/posts/smoothing-out-a-beautiful-soup-tree/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;p&gt;
If you edit the HTML tree in Beautiful Soup you should call the &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#smooth"&gt;smooth&lt;/a&gt; method to smooth out any funkiness that got introduced.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'&lt;/module&gt;</description><category>beautiful soup</category><category>html</category><category>slipnote</category><category>web-scraping</category><guid>https://necromuralist.github.io/posts/smoothing-out-a-beautiful-soup-tree/</guid><pubDate>Wed, 05 Aug 2020 23:58:02 GMT</pubDate></item><item><title>Replacing Tags With Beautiful Soup</title><link>https://necromuralist.github.io/posts/replacing-tags-with-beautiful-soup/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="outline-container-org861c3db" class="outline-2"&gt;
&lt;h2 id="org861c3db"&gt;Notes&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org861c3db"&gt;
&lt;p&gt;
To replace a tag in Beautful Soup, find the element then call its &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#replace-with"&gt;replace_with&lt;/a&gt; method passing in either a string or tag.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
&lt;/module&gt;&lt;/div&gt;
&lt;/div&gt;</description><category>beautiful soup</category><category>html</category><category>slipnote</category><category>web-scraping</category><guid>https://necromuralist.github.io/posts/replacing-tags-with-beautiful-soup/</guid><pubDate>Wed, 05 Aug 2020 23:53:20 GMT</pubDate></item><item><title>Destroying Tags With Beautiful Soup</title><link>https://necromuralist.github.io/posts/destroying-tags-with-beautiful-soup/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;p&gt;
There are various ways to edit tags with &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/"&gt;Beautiful Soup&lt;/a&gt;, The &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#decompose"&gt;decompose&lt;/a&gt; method both removes the tag from the tree and destroys the object (along with all its descendants in the HTML tree). 
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

&lt;p&gt;
If you want to destroy tags around the one you found (along with the tag and its descendants in the tree) then call decompose on it's parent or parent's parent (and so on). Or figure out how to find its parent instead - whichever is easier.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'


&lt;p&gt;
After you edit the tree it might be a good idea to call &lt;a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#smooth"&gt;smooth&lt;/a&gt; to clean up a bit.
&lt;/p&gt;

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in &lt;module&gt;
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'&lt;/module&gt;&lt;/module&gt;&lt;/module&gt;</description><category>beautiful soup</category><category>html</category><category>slipnote</category><category>web-scraping</category><guid>https://necromuralist.github.io/posts/destroying-tags-with-beautiful-soup/</guid><pubDate>Wed, 05 Aug 2020 22:57:27 GMT</pubDate></item></channel></rss>