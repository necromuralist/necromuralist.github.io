<html><body><div class="document" id="splitting-the-logs-with-csplit">   <p><cite>csplit</cite> is a POSIX command to split a file into sub-files using a line-delimiter:</p><pre class="literal-block"><br>csplit [options] &lt;file-name&gt; &lt;pattern&gt;<br></pre><div class="section" id="patterns"><h4>Patterns</h4><p>The <em>pattern</em> can be a number (i.e. to split every so many lines) or a regular expression.</p><div class="section" id="example-split-the-ape-tools-log-into-separate-tests"><h5>Example: Split the ape-tools log into separate tests</h5><p>Each test starts with a recording of the contents of the <em>Parameters</em> named-tuple. It can be matched with the pattern:</p><pre class="literal-block"><br>INFO.*Running\ Parameters<br></pre><p>The <cite>csplit</cite> command defaults to stopping after the first match so to trim off all the lines that come before the first match:</p><pre class="literal-block"><br>csplit apetools.log /INFO.*Running\ Parameters/<br></pre><p>The forward-slashes enclose the pattern and tell <cite>csplit</cite> to save off all the text up to but not including the matched line. If you use percent-signs it will save all the text after the pattern:</p><pre class="literal-block"><br>csplit apetools.log %INFO.*Running\ Parameters%<br></pre><p>In the example we're not doing anything hugely useful, as the  tests are all in the same file. To tell <cite>csplit</cite> to break it up for more than the first match you use the <cite>{&lt;count&gt;}</cite> option. Since you want all the tests you can pass in a wild-card instead of an exact number:</p><pre class="literal-block"><br>csplit apetools.log /INFO.*Running\ Parameters/ {*}<br></pre></div></div><div class="section" id="file-names"><h4>File-Names</h4><p><cite>csplit</cite> names the output files it creates based on two parts -- a prefix and a suffix. The default prefix is <cite>xx</cite> and the default suffix is <cite>%02d</cite> (the strfmt format for an integer with at least 2 places). So the previous command would produce a set of files (<cite>xx00</cite>, <cite>xx01</cite>, etc.). If you want to make them a little more memorable you can change the prefix and suffix:</p><pre class="literal-block"><br>csplit apetools.log /INFO.*Running\ Parameters/ {*} --prefix apetest --suffix-format %03d.log<br></pre><p>The output for this would be a series of files:</p><pre class="literal-block"><br>apetest000.log, apetest001.log, ...<br></pre></div></div></body></html>