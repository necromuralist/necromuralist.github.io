<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Walking through the SQL Alchemy Tutorial.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SQL Alchemy Tutorial | The Cloistered Monkey</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/posts/sql-alchemy-tutorial/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="manifest" href="../../site.webmanifest">
<meta name="author" content="Cloistered Monkey">
<link rel="prev" href="../remote-jupyter-sessions-with-ob-ipython/" title="Remote jupyter Sessions With ob-ipython" type="text/html">
<link rel="next" href="../data/data-source-links/" title="Data Source Links" type="text/html">
<meta property="og:site_name" content="The Cloistered Monkey">
<meta property="og:title" content="SQL Alchemy Tutorial">
<meta property="og:url" content="https://necromuralist.github.io/posts/sql-alchemy-tutorial/">
<meta property="og:description" content="Walking through the SQL Alchemy Tutorial.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-11-30T17:10:50-08:00">
<meta property="article:tag" content="sql-alchemy">
<meta property="article:tag" content="tutorial">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">The Cloistered Monkey</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../pages/" class="nav-link">Pages</a>
                </li>
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
            <div class="dropdown-menu">
                    <a href="https://necromuralist.github.io/Bowling-For-Data/" class="dropdown-item">Bowling For Data</a>
                    <a href="https://necromuralist.github.io/Anechoic-Echolalia/" class="dropdown-item">Anechoic Echolalia</a>
                    <a href="https://necromuralist.github.io/Ape-Iron/" class="dropdown-item">Ape Iron</a>
                    <a href="https://necromuralist.github.io/Neurotic-Networking/" class="dropdown-item">Neurotic Networking</a>
                    <a href="https://necromuralist.github.io/student_intervention/" class="dropdown-item">Student Intervention Project</a>
                    <a href="https://necromuralist.github.io/boston_housing/" class="dropdown-item">Boston Housing Project</a>
                    <a href="https://necromuralist.github.io/data_science/" class="dropdown-item">Data Science With Python</a>
                    <a href="https://necromuralist.github.io/Visions-Voices-Data/" class="dropdown-item">Visions, Voices, Data</a>
            </div>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<!-- 
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
-->
<input type="hidden" name="sitesearch" value="https://necromuralist.github.io/">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.org" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SQL Alchemy Tutorial</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/cloistered-monkey/">Cloistered Monkey</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2018-11-30T17:10:50-08:00" itemprop="datePublished" title="2018-11-30 17:10">2018-11-30 17:10</time></a>
            </p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org9498c7c">Imports</a></li>
<li><a href="#orgc4bab2f">Create the Engine</a></li>
<li><a href="#orgbb256bd">Declare a Mapping</a></li>
<li><a href="#orge93c60f">Create a Schema</a></li>
<li><a href="#org76c5d30">Create a User</a></li>
<li><a href="#org64fd38f">Create a Session</a></li>
<li><a href="#org6267391">Add Bob to the Session</a></li>
<li><a href="#org1dbf273">More Users</a></li>
</ul>
</div>
</div>
<p>
This is a walk through of the <a href="https://docs.sqlalchemy.org/en/latest/orm/tutorial.html">SQL Alchemy Tutorial</a>. There's nothing original here, I'm just trying to re-acquaint myself with SQL Alchemy.
</p>
<div id="outline-container-org9498c7c" class="outline-2">
<h2 id="org9498c7c">Imports</h2>
<div class="outline-text-2" id="text-org9498c7c">
Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
</module>
</div>
</div>
<div id="outline-container-orgc4bab2f" class="outline-2">
<h2 id="orgc4bab2f">Create the Engine</h2>
<div class="outline-text-2" id="text-orgc4bab2f">
<p>
This is going to connect to <a href="https://sqlite.org/index.html">SQLite</a> (in memory).
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
The <code>echo</code> parameter tells SQLAlchemy to start logging.
</p>
</module>
</div>
</div>

<div id="outline-container-orgbb256bd" class="outline-2">
<h2 id="orgbb256bd">Declare a Mapping</h2>
<div class="outline-text-2" id="text-orgbb256bd">
</div>
<div id="outline-container-org5c20405" class="outline-3">
<h3 id="org5c20405">The Base</h3>
<div class="outline-text-3" id="text-org5c20405">
<p>
This creates a base-class that our classes will inherit from.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
</module>
</div>
</div>
<div id="outline-container-org5bf0ccd" class="outline-3">
<h3 id="org5bf0ccd">A User</h3>
<div class="outline-text-3" id="text-org5bf0ccd">
<p>
First we're going to create a User class that maps to a user-table in the database.
</p>
Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
</module>
</div>
</div>
</div>
<div id="outline-container-orge93c60f" class="outline-2">
<h2 id="orge93c60f">Create a Schema</h2>
<div class="outline-text-2" id="text-orge93c60f">
<p>
SQL Alchemy automatically creates a Table object for us.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
# Out[5]:
</p>
<pre class="example">
Table('users', MetaData(bind=None), Column('id', Integer(), table=&lt;users&gt;, primary_key=True, nullable=False), Column('name', String(), table=&lt;users&gt;), Column('fullname', String(), table=&lt;users&gt;), Column('password', String(), table=&lt;users&gt;), schema=None)
</pre>


<p>
If you try and print it you will only get the table-name 'users'.
</p>
</module>
</div>

<div id="outline-container-orgb5299a7" class="outline-3">
<h3 id="orgb5299a7">Create the Table</h3>
<div class="outline-text-3" id="text-orgb5299a7">
<p>
Now we actually create the table using the Base object.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example" id="org9e28e06">
2018-11-30 18:05:27,009 INFO sqlalchemy.engine.base.Engine SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon_1
2018-11-30 18:05:27,010 INFO sqlalchemy.engine.base.Engine ()
2018-11-30 18:05:27,011 INFO sqlalchemy.engine.base.Engine SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon_1
2018-11-30 18:05:27,011 INFO sqlalchemy.engine.base.Engine ()
2018-11-30 18:05:27,013 INFO sqlalchemy.engine.base.Engine PRAGMA table_info("users")
2018-11-30 18:05:27,014 INFO sqlalchemy.engine.base.Engine ()
2018-11-30 18:05:27,015 INFO sqlalchemy.engine.base.Engine 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	name VARCHAR, 
	fullname VARCHAR, 
	password VARCHAR, 
	PRIMARY KEY (id)
)


2018-11-30 18:05:27,016 INFO sqlalchemy.engine.base.Engine ()
2018-11-30 18:05:27,017 INFO sqlalchemy.engine.base.Engine COMMIT
</pre>
</module>
</div>
</div>
</div>

<div id="outline-container-org76c5d30" class="outline-2">
<h2 id="org76c5d30">Create a User</h2>
<div class="outline-text-2" id="text-org76c5d30">
Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example">
bob
Bob Dobolina
None
</pre>
</module>
</div>
</div>

<div id="outline-container-org64fd38f" class="outline-2">
<h2 id="org64fd38f">Create a Session</h2>
<div class="outline-text-2" id="text-org64fd38f">
<p>
So far we've only been working with python objects, you need a session to actually talk to a database.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
</module></module>
</div>
</div>

<div id="outline-container-org6267391" class="outline-2">
<h2 id="org6267391">Add Bob to the Session</h2>
<div class="outline-text-2" id="text-org6267391">
Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
This still doesn't actually add it to the database, we need to commit it. This is useful because you can continue to create objects and update them without continuously hitting the database.
</p>

<p>
Now we actually do our first communication with the database.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example" id="org34f188f">
2018-12-03 14:39:51,652 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
2018-12-03 14:39:51,655 INFO sqlalchemy.engine.base.Engine INSERT INTO users (name, fullname, password) VALUES (?, ?, ?)
2018-12-03 14:39:51,656 INFO sqlalchemy.engine.base.Engine ('bob', 'Bob Dobolina', 'bob spelled backwards')
2018-12-03 14:39:51,658 INFO sqlalchemy.engine.base.Engine COMMIT
</pre>


Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example">
Bob's ID: 1
</pre>


<p>
Even though we didn't specify the ID, it gets added when the entry is committed to the database.
</p>
</module></module></module>
</div>
</div>

<div id="outline-container-org1dbf273" class="outline-2">
<h2 id="org1dbf273">More Users</h2>
<div class="outline-text-2" id="text-org1dbf273">
<p>
Instead of adding them one at a time you can pass in a list of users.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example">
2018-12-03 14:46:48,764 INFO sqlalchemy.engine.base.Engine INSERT INTO users (name, fullname, password) VALUES (?, ?, ?)
2018-12-03 14:46:48,765 INFO sqlalchemy.engine.base.Engine ('ted', 'Ted Thompson', 'wordpass')
2018-12-03 14:46:48,766 INFO sqlalchemy.engine.base.Engine INSERT INTO users (name, fullname, password) VALUES (?, ?, ?)
2018-12-03 14:46:48,767 INFO sqlalchemy.engine.base.Engine ('tom', 'Tom Tuttle', 'tacoma')
2018-12-03 14:46:48,768 INFO sqlalchemy.engine.base.Engine COMMIT
</pre>


<p>
Now we can make a query to see what's there.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<pre class="example">
2018-12-03 14:48:53,556 INFO sqlalchemy.engine.base.Engine SELECT users.id AS users_id, users.name AS users_name, users.fullname AS users_fullname, users.password AS users_password 
FROM users ORDER BY users.id
2018-12-03 14:48:53,557 INFO sqlalchemy.engine.base.Engine ()
1 Bob Dobolina
2 Ted Thompson
3 Tom Tuttle
</pre>
</module></module></module>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/sql-alchemy/" rel="tag">sql-alchemy</a></li>
            <li><a class="tag p-category" href="../../categories/tutorial/" rel="tag">tutorial</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../remote-jupyter-sessions-with-ob-ipython/" rel="prev" title="Remote jupyter Sessions With ob-ipython">Previous post</a>
            </li>
            <li class="next">
                <a href="../data/data-source-links/" rel="next" title="Data Source Links">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents Â© 2023         <a href="mailto:cloisteredmonkey.jmark@slmail.me">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
