<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts by Cloistered Monkey)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/authors/cloistered-monkey.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2020 &lt;a href="mailto:necromuralist@protonmail.com"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Mon, 07 Dec 2020 01:25:58 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Using Systemd To Enable Wake-On-Lan</title><link>https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/#org2f8ba24"&gt;What is this about?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/#orgb738263"&gt;So, how do you do it?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/#orga086499"&gt;So, That Fixed It?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/#org47d45d9"&gt;Where did you find out about this?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org2f8ba24" class="outline-2"&gt;
&lt;h2 id="org2f8ba24"&gt;What is this about?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org2f8ba24"&gt;
&lt;p&gt;
I made a previous post (&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/"&gt;Enabling Wake-On-LAN (In Ubuntu 20.10)&lt;/a&gt;) about enabling Wake-On-LAN on my server, but it didn't seem to work after a re-boot. I looked in the logs using &lt;a href="https://www.commandlinux.com/man-page/man1/journalctl.1.html"&gt;journalctl&lt;/a&gt; and noticed that the &lt;code&gt;wol.service&lt;/code&gt; that I set up didn't get enabled after the re-boot. I thought about it and I remembered that when I was working with bluetooth and set up a service for it I had to make it wait for the bluetooth service to start first or it wouldn't work and realized that there was nothing in the &lt;code&gt;wol.service&lt;/code&gt; file to tell it to wait so I went poking around and found what I hope to be a fix.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb738263" class="outline-2"&gt;
&lt;h2 id="orgb738263"&gt;So, how do you do it?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgb738263"&gt;
&lt;p&gt;
We need to update the &lt;code&gt;/etc/systemd/system/wol.service&lt;/code&gt; that I created in that earlier post. Previously it looked like this:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Unit]
Description=Enable Wake On Lan

[Service]
Type=oneshot
ExecStart = /sbin/ethtool --change enp4s0 wol g

[Install]
WantedBy=basic.target
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
We need to update the &lt;code&gt;[Unit]&lt;/code&gt; section by adding
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Requires=network.target
After=network.target
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
To let systemd know that we don't want this to run until after the network service has run. I also changed the &lt;code&gt;WantedBy&lt;/code&gt;  to &lt;code&gt;multi-user.target&lt;/code&gt;. So the updated file looks like this:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Unit]
Description=Enable Wake On Lan
Requires=network.target
After=network.target

[Service]
Type=oneshot
ExecStart = /sbin/ethtool --change enp4s0 wol g

[Install]
WantedBy=multi-user.target
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Now reload the daemon and re-enable it.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl daemon-reload
sudo systemctl enable wol.service
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
To make sure I didn't introduce any errors I ran it once.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl start wol
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Then I rebooted it.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo reboot now
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
This time in journalctl I saw this:
&lt;/p&gt;

&lt;pre class="example"&gt;
Dec 07 00:02:17 erebus systemd[1]: Finished Enable Wake On Lan.
Dec 07 00:02:17 erebus systemd[1]: wol.service: Succeeded.
&lt;/pre&gt;

&lt;p&gt;
And running &lt;code&gt;ethtool&lt;/code&gt; showed that it was enabled.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Wake-on: g
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga086499" class="outline-2"&gt;
&lt;h2 id="orga086499"&gt;So, That Fixed It?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orga086499"&gt;
&lt;p&gt;
Well, insofar as it's working now, yes. But since I change more than one thing I don't really know exactly what did it (was it one of the three lines I changed or all of them?). Anyway, since it works I'll let it lie for now.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org47d45d9" class="outline-2"&gt;
&lt;h2 id="org47d45d9"&gt;Where did you find out about this?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org47d45d9"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;The Arch wiki has a page on &lt;a href="https://wiki.archlinux.org/index.php/Wake-on-LAN"&gt;Wake-On-LAN&lt;/a&gt; that tells you many different ways to set it up – I copied the systemd file almost exactly. It has quite a bit of useful information (too much maybe), but not all the commands will work out of the box on Ubuntu (because it's Arch).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>how-to</category><category>networking</category><category>systemd</category><category>ubuntu</category><guid>https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/</guid><pubDate>Sun, 06 Dec 2020 23:10:53 GMT</pubDate></item><item><title>Mount An Encrypted Drive Using cryptsetup</title><link>https://necromuralist.github.io/posts/mount-an-encrypted-drive-using-cryptsetup/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/mount-an-encrypted-drive-using-cryptsetup/#orgc9720e2"&gt;What Is This About?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/mount-an-encrypted-drive-using-cryptsetup/#org949a056"&gt;So, How Do You Do It?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/mount-an-encrypted-drive-using-cryptsetup/#orgc1594f5"&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc9720e2" class="outline-2"&gt;
&lt;h2 id="orgc9720e2"&gt;What Is This About?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc9720e2"&gt;
&lt;p&gt;
This is how to mount a LUKS encrypted drive with &lt;a href="https://manpages.ubuntu.com/manpages/xenial/man8/cryptsetup.8.html"&gt;cryptsetup&lt;/a&gt; in Ubuntu 20.10 (Groovy Gorilla). My use-case is I have a headless server that has an external USB drive that's encrypted with &lt;a href="https://en.wikipedia.org/wiki/Linux_Unified_Key_Setup"&gt;LUKS&lt;/a&gt; that I need to mount from the command line. I like the flexibility it gives a little more than the what the Gnome GUI does so I'll probably use it on my desktop as well. I previously documented how to do it with &lt;a href="http://storaged.org/doc/udisks2-api/latest/udisksctl.1.html"&gt;udiskctl&lt;/a&gt; in &lt;a href="https://necromuralist.github.io/posts/mounting-an-encrypted-usb-drive/"&gt;this post&lt;/a&gt; but I like &lt;code&gt;cryptsetup&lt;/code&gt; a little better. This assumes that you know the partition/device (in my case it's &lt;code&gt;/dev/sdb1&lt;/code&gt;). That previous post shows how I found it so I'll just do the decrypting and mounting here.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org949a056" class="outline-2"&gt;
&lt;h2 id="org949a056"&gt;So, How Do You Do It?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org949a056"&gt;
&lt;p&gt;
The syntax to decrypt the device is:
&lt;/p&gt;

&lt;pre class="example"&gt;
sudo cryptsetup open &amp;lt;device&amp;gt; &amp;lt;name&amp;gt;
&lt;/pre&gt;

&lt;p&gt;
As I mentioned above, in this case my &lt;code&gt;device&lt;/code&gt; is &lt;code&gt;/dev/sdb1&lt;/code&gt;. The name can be an arbitrary one (although there are limitiations on special characters so let's say it can be any alpha-numeric name) and I'll use &lt;code&gt;wddata&lt;/code&gt; as the name. Then my command to decrypt the drive is:
&lt;/p&gt;

&lt;pre class="example"&gt;
sudo cryptsetup open /dev/sdb1 wddata
&lt;/pre&gt;

&lt;p&gt;
This will prompt you for your password and then the encryption passphrase. Once the command succeeds, it adds a link in &lt;code&gt;/dev/mapper&lt;/code&gt; using the name you passed in so you can mount the device (assuming the directory you want to mount it in exists) like this:
&lt;/p&gt;

&lt;pre class="example"&gt;
sudo mount /dev/mapper/wddata /media/data
&lt;/pre&gt;

&lt;p&gt;
Where &lt;code&gt;wddata&lt;/code&gt; is the name I told &lt;code&gt;cryptsetup&lt;/code&gt; to use and &lt;code&gt;/media/data&lt;/code&gt; is a directory that I had previously created.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgc1594f5" class="outline-2"&gt;
&lt;h2 id="orgc1594f5"&gt;Source&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc1594f5"&gt;
&lt;p&gt;
Besides the man-page for &lt;code&gt;cryptsetup&lt;/code&gt; on my server, I was pointed to use &lt;code&gt;cryptsetup&lt;/code&gt; from this StackOverflow post:
&lt;/p&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/63594/mount-encrypted-volumes-from-command-line"&gt;https://askubuntu.com/questions/63594/mount-encrypted-volumes-from-command-line&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
The accepted answer uses &lt;code&gt;udiskctl&lt;/code&gt; but further down is an answer by George Schölly using &lt;code&gt;cryptsetup&lt;/code&gt;. The syntax in the answer is the older &lt;code&gt;cryptsetup&lt;/code&gt; syntax (which should still work) so it doesn't look exactly like what I used.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>how-to</category><category>luks</category><category>ubunt</category><guid>https://necromuralist.github.io/posts/mount-an-encrypted-drive-using-cryptsetup/</guid><pubDate>Sun, 06 Dec 2020 00:20:32 GMT</pubDate></item><item><title>Enabling Wake-On-LAN (In Ubuntu 20.10)</title><link>https://necromuralist.github.io/posts/enabling-wake-on-lan/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org9a22d50"&gt;Beginning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org706ae51"&gt;Middle&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org7a4c842"&gt;Ethtool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org3fc6dc4"&gt;Checking the Interface&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org4ee0110"&gt;Turn It On Temporarily&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org7353c6d"&gt;Test It Out&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org6d263d9"&gt;Take Two&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#orga59d4e8"&gt;Making It Permanent&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/enabling-wake-on-lan/#org682628e"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; The systemd configuration here isn't quite right, but since this post is kind of long and convoluted I made a standalone update about the systemd configuration file in &lt;a href="https://necromuralist.github.io/posts/using-systemd-to-enable-wake-on-lan/"&gt;this post&lt;/a&gt;.
&lt;/p&gt;

&lt;div id="outline-container-org9a22d50" class="outline-2"&gt;
&lt;h2 id="org9a22d50"&gt;Beginning&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org9a22d50"&gt;
&lt;p&gt;
These are my notes on getting &lt;a href="https://en.wikipedia.org/wiki/Wake-on-LAN"&gt;Wake-On-LAN&lt;/a&gt; working in Ubuntu 20.10. I have a server that I use to run most of the computation on when I use emacs/jupyter but I have it in a corner upstairs and although it's only a little walk, I find that the fact that I have to stop what I'm doing and go upstairs to push that little button on the front makes me lazy and so it ends up running more than it has to so I thought I'd enable Wake-On-LAN so I can suspend it and wake it up whenever I need to. I'm only going to use suspend (&lt;a href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface"&gt;APM&lt;/a&gt; S3). When I tried to use hibernate (S4) it ended up shutting down my machine (S5). Interestingly, my BIOS menu has an option to enable waking up from shutdown, but since my disk is encrypted, and I didn't set up a separate SSH server, I have to go enter the passphrase to unlock the disk before the operating system can boot up, so it kind of defeats its own purpose.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org706ae51" class="outline-2"&gt;
&lt;h2 id="org706ae51"&gt;Middle&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org706ae51"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org7a4c842" class="outline-3"&gt;
&lt;h3 id="org7a4c842"&gt;Ethtool&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7a4c842"&gt;
&lt;p&gt;
The command I used to set up Wake-On-LAN on the remote machine is called &lt;a href="https://en.wikipedia.org/wiki/Ethtool"&gt;ethtool&lt;/a&gt;. It's in the Ubuntu repositories but wasn't installed on my machine so I had to add it.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install ethtool
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3fc6dc4" class="outline-3"&gt;
&lt;h3 id="org3fc6dc4"&gt;Checking the Interface&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org3fc6dc4"&gt;
&lt;p&gt;
From what I've read, not all ethernet interfaces support Wake-On-LAN (although I've never seen one that doesn't) so a quick check might be useful. First, find the name of your ethernet interface.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ip a
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
My machine shows four interfaces so I'll just show the output for the interface I'm interested in rather than the whole output for the command.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;2: enp4s0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 38:d5:47:79:ab:0b brd ff:ff:ff:ff:ff:ff
    inet 192.168.86.97/24 brd 192.168.86.255 scope global dynamic noprefixroute enp4s0
       valid_lft 84752sec preferred_lft 84752sec
    inet6 fe80::685d:374d:a577:f787/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Ethtool uses the name of the interface, in this case it's &lt;code&gt;enp4s0&lt;/code&gt;, so we'll need to note that. Additionally, the machine that I used to wake up the machine needs the MAC address (&lt;code&gt;38:d5:47:79:ab:0b&lt;/code&gt;) so it'd be useful to write that down someplace. I'm waking it up from the LAN so the IP address isn't so important, and to be able to SSH into it I need to know it anyway, so it's really those two pieces of information that I need. Now to check if it supports Wake-On-LAN.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ethtool enp4s0
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Ethtool will give you some information if you don't run it as root but for Wake-On-LAN you need to run it as root. The important lines in the output is near the bottom and it looks something like this if it supports Wake-On-LAN.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Supports Wake-on: pumbg
Wake-on: d
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The man-page for &lt;code&gt;ethtool&lt;/code&gt; tell you what that cryptic &lt;code&gt;pumbg&lt;/code&gt; means - the letters are different options that this interface supports for Wake-On-LAN. In this case they are:
&lt;/p&gt;

&lt;table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"&gt;


&lt;colgroup&gt;
&lt;col class="org-left"&gt;

&lt;col class="org-left"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th scope="col" class="org-left"&gt;Option&lt;/th&gt;
&lt;th scope="col" class="org-left"&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="org-left"&gt;p&lt;/td&gt;
&lt;td class="org-left"&gt;Wake on PHY activity&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;u&lt;/td&gt;
&lt;td class="org-left"&gt;Wake on unicast messages&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;m&lt;/td&gt;
&lt;td class="org-left"&gt;Wake on multicast messages&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;b&lt;/td&gt;
&lt;td class="org-left"&gt;Wake on broadcast messages&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td class="org-left"&gt;g&lt;/td&gt;
&lt;td class="org-left"&gt;Wake on MagicPacket messages&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;
There's an additional option which is what the interface was set on – &lt;code&gt;d&lt;/code&gt; – as you can see in the last line of the output. This means &lt;i&gt;Disable (wake on nothing).  This option clears all previous options.&lt;/i&gt; I don't have many devices on my network, so I don't know that there's a lot of broadcasts, multicasts, etc. that would be waking it up all the time, but since one feature of Wake-On-LAN is that it only wakes the machine when it gets the "Magic Packet", only the &lt;code&gt;g&lt;/code&gt; and &lt;code&gt;d&lt;/code&gt; options matter. Now that I knew it was supported, it was time to try it out.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org4ee0110" class="outline-3"&gt;
&lt;h3 id="org4ee0110"&gt;Turn It On Temporarily&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org4ee0110"&gt;
&lt;p&gt;
The &lt;code&gt;ethtool&lt;/code&gt; will turn on Wake-On-LAN, but (supposedly) everytime you reboot the machine it will reset to disabled. I haven't really tested this out, but I'll document how to make it permanent later, anyway.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ethtool --change enp4s0 wol g
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
So, as you might guess, we changed the Wake-On-LAN setting to listen for MagicPacket messages. You can check using the ethtool again.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ethtool enp4s0
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The &lt;code&gt;Wake-on&lt;/code&gt; line should have changed to:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Wake-on: g
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Now to suspend the machine so we can test it out.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl suspend
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org7353c6d" class="outline-3"&gt;
&lt;h3 id="org7353c6d"&gt;Test It Out&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7353c6d"&gt;
&lt;p&gt;
Now, on my local machine I needed to install &lt;a href="https://github.com/jpoliv/wakeonlan"&gt;wakeonlan&lt;/a&gt;. There's a surprising number of programs to send the Magic Packet, but this just happened to be the one I used.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install wakeonlan
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The default way to use &lt;code&gt;wakeonlan&lt;/code&gt; is apparently to just pass it the MAC address of the computer to wake up, and it will send the Magic Packet out as a broadcast, so that's what I did.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wakeonlan 38:d5:47:79:ab:0b
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And then I pinged the machine and I waited. And I waited. And I waited… Eventually I went upstairs and saw that it was still sleeping so I pushed the power button to wake it up and went back downstairs.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org6d263d9" class="outline-3"&gt;
&lt;h3 id="org6d263d9"&gt;Take Two&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org6d263d9"&gt;
&lt;p&gt;
Something wasn't right so I SSHd into the server and started up &lt;a href="https://www.tcpdump.org/"&gt;tcpdump&lt;/a&gt; to see if the packets were going through.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo tcpdump -i enp4s0 '(udp and port 7) or (udp and port 9)'
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Which gave me this output:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on enp4s0, link-type EN10MB (Ethernet), capture size 262144 bytes
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And then I sent the Magic Packet again.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wakeonlan 38:d5:47:79:ab:0b
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
…And nothing happened. For some reason the packets weren't getting picked up by the machine. Luckily, &lt;code&gt;wakeonlan&lt;/code&gt; lets you pass in an IP address as an option. The man page recommends using a broadcast address, but I have the IP addresses of my machines on the LAN reserved on my router/access-point so I just passed in the full address (I did try the LAN broadcast and it worked too).
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wakeonlan -i erebus 38:d5:47:79:ab:0b
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
I have my machine's IP address aliased in my &lt;code&gt;/etc/hosts&lt;/code&gt; file so &lt;code&gt;erebus&lt;/code&gt; is just an alias for the machine's IP address. The subnet broadcast version looked like this.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wakeonlan -i 192.168.86.255 38:d5:47:79:ab:0b
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The output from &lt;code&gt;tcpdump&lt;/code&gt; for the first packet looked like this.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on enp4s0, link-type EN10MB (Ethernet), capture size 262144 bytes
20:47:11.689587 IP 192.168.86.141.34805 &amp;gt; erebus.discard: UDP, length 102
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
So, something was different. I suspended the machine again and sent the Magic Packet and this time it worked. Go figure.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga59d4e8" class="outline-3"&gt;
&lt;h3 id="orga59d4e8"&gt;Making It Permanent&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orga59d4e8"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5b7f6b2" class="outline-4"&gt;
&lt;h4 id="org5b7f6b2"&gt;Set It Up&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5b7f6b2"&gt;
&lt;p&gt;
The reasons that I said earlier that the Wake-On-LAN setting "supposedly" is temporary is that:
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;I haven't really re-booted that machine to test it out (I have rebooted, but I haven't disable the &lt;a href="https://en.wikipedia.org/wiki/Systemd"&gt;systemd&lt;/a&gt; service that I'm documenting here).&lt;/li&gt;
&lt;li&gt;The machine that I'm typing this on had Wake-On-LAN enabled and it doesn't have a &lt;code&gt;systemd&lt;/code&gt; service enabled.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
But, really, I don't remember even enabling Wake-On-LAN on this machine so maybe it just was the default and I didn't realise it… another thing I should look into one of these days. Anyway, to make a service that always enables Wake-On-LAN the first step is to find the path to &lt;code&gt;ethertool&lt;/code&gt;.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;which ethtool
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
In my case the path was &lt;code&gt;/sbin/ethtool&lt;/code&gt;, so once you know this you can create a file at &lt;code&gt;/etc/systemd/system/wol.service&lt;/code&gt; (I think you can use another systemd sub-folder, and you can name the file anything you want, within reason, but this one seems to work well enough). In this file you put settings that look something like this:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[Unit]
Description=Enable Wake On Lan

[Service]
Type=oneshot
ExecStart = /sbin/ethtool --change enp4s0 wol g

[Install]
WantedBy=basic.target
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The only thing specific to my machine is &lt;code&gt;enp4s0&lt;/code&gt;, the name of the ethernet interface, although it's possible that the path to the &lt;code&gt;ethtool&lt;/code&gt; executable might be different too… but it should be the same on Ubuntu 20.10, anyway.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org057b2a0" class="outline-4"&gt;
&lt;h4 id="org057b2a0"&gt;Enable The Service&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org057b2a0"&gt;
&lt;p&gt;
To enable it you can do this:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo systemctl daemon-reload
sudo systemctl enable wol.service
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Where &lt;code&gt;wol.service&lt;/code&gt; is the name of the file you created with the settings. You can check its status if you want.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;systemctl status wol
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And that's that.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org682628e" class="outline-2"&gt;
&lt;h2 id="org682628e"&gt;End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org682628e"&gt;
&lt;p&gt;
So, that's how I got one machine working with Wake-On-LAN. Hopefully I won't have to look so hard the next time. Here's the pages that I stole this from.
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a href="https://www.techrepublic.com/article/how-to-enable-wake-on-lan-in-ubuntu-server-18-04/"&gt;TechRepublic&lt;/a&gt; on using &lt;code&gt;ethtool&lt;/code&gt; and setting up a &lt;code&gt;systemd&lt;/code&gt; service for this (don't use the systemd file here, though).&lt;/li&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/1792/how-can-i-suspend-hibernate-from-command-line"&gt;Stack Overflow&lt;/a&gt; on how to suspend and hibernate from the command-line&lt;/li&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/3369/what-is-the-difference-between-hibernate-and-suspend"&gt;Stack Overflow&lt;/a&gt; on what the difference is between suspend and hibernate&lt;/li&gt;
&lt;li&gt;&lt;a href="https://unix.stackexchange.com/questions/318137/wake-on-lan-not-working-on-ubuntu-16-04"&gt;Stack Overflow&lt;/a&gt; on using &lt;code&gt;tcpdump&lt;/code&gt; to look for the Magic Packets on the remote machine&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/2177687/open-file-via-ssh-and-sudo-with-emacs"&gt;Stack Overflow&lt;/a&gt; on editing remote files as root with emacs (not documented here, but maybe later)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://stackoverflow.com/questions/95631/open-a-file-with-su-sudo-inside-emacs"&gt;Stack Overflow&lt;/a&gt; on editing a local file as root with emacs (not used here, but I can never remember the syntax)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>networking</category><category>ubuntu</category><guid>https://necromuralist.github.io/posts/enabling-wake-on-lan/</guid><pubDate>Sun, 29 Nov 2020 01:57:35 GMT</pubDate></item><item><title>Bib: The Kekule Problem</title><link>https://necromuralist.github.io/posts/bib-the-kekule-problem/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="outline-container-orgebd82dd" class="outline-2"&gt;
&lt;h2 id="orgebd82dd"&gt;Citation&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgebd82dd"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;McCarthy C. The Kekulé Problem [Internet]. Nautilus. 2017 [cited 2020 Nov 24]. Available from: &lt;a href="http://nautil.us/issue/47/consciousness/the-kekul-problem"&gt;http://nautil.us/issue/47/consciousness/the-kekul-problem&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>essay</category><category>mind</category><guid>https://necromuralist.github.io/posts/bib-the-kekule-problem/</guid><pubDate>Wed, 25 Nov 2020 07:01:38 GMT</pubDate></item><item><title>Memoization and the Fibonacci Sequence</title><link>https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/#orgc080379"&gt;What It Is&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/#orgd229f7c"&gt;Recurse&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/#org2918210"&gt;Memoize&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/#orge65b41a"&gt;Once Again With Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgc080379" class="outline-2"&gt;
&lt;h2 id="orgc080379"&gt;What It Is&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc080379"&gt;
&lt;p&gt;
This is a note on using memoization with recursion - specifically with the generation of a &lt;a href="https://www.wikiwand.com/en/Fibonacci_number"&gt;Fibonacci Number&lt;/a&gt;. The fibonacci numbers form a sequence where
&lt;/p&gt;

&lt;p&gt;
\[
F_0 = 0, F_1 = 1
\]
&lt;/p&gt;

&lt;p&gt;
and then for the rest of the numbers greater than 1
&lt;/p&gt;

&lt;p&gt;
\[
F_n = F_{n-1} + F_{n-2}
\]
&lt;/p&gt;

&lt;p&gt;
So, starting from 0 you get &lt;i&gt;0, 1, 1, 2, 3, 5, 8,&lt;/i&gt; etc.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgd229f7c" class="outline-2"&gt;
&lt;h2 id="orgd229f7c"&gt;Recurse&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgd229f7c"&gt;
&lt;p&gt;
Calculating the sequence is often done with recursion because you can pretty much take the definition and convert it to a function with little translation.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="sd"&gt;"""Calculates the n-indexed fibonacci number&lt;/span&gt;

&lt;span class="sd"&gt;    Args:&lt;/span&gt;
&lt;span class="sd"&gt;     n: the index of the number in the (zero-based) sequence to get&lt;/span&gt;

&lt;span class="sd"&gt;    Returns:&lt;/span&gt;
&lt;span class="sd"&gt;     fibonacci number at index n&lt;/span&gt;
&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
	&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;55&lt;/span&gt;
&lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;actual&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
55
&lt;/pre&gt;


&lt;p&gt;
Remember that &lt;i&gt;n&lt;/i&gt; is the index for number, not the count (the second number in the sequence has index 1).
&lt;/p&gt;

&lt;p&gt;
The problem here is that recursion like this has memory limits and takes a long time.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;graeae&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Timer&lt;/span&gt;
&lt;span class="n"&gt;TIMER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Timer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;102334155&lt;/span&gt;
&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;
&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;TIMER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
2020-11-09 21:11:05,852 graeae.timers.timer start: Started: 2020-11-09 21:11:05.852071
2020-11-09 21:11:50,249 graeae.timers.timer end: Ended: 2020-11-09 21:11:50.249808
2020-11-09 21:11:50,251 graeae.timers.timer end: Elapsed: 0:00:44.397737
40
&lt;/pre&gt;


&lt;p&gt;
Less than a minute might not seem like a big deal, but even pushing it up to 45 makes the wait too long (I gave up and killed the process so I don't know how long it ran). So what's the solution? Let's try &lt;a href="https://www.wikiwand.com/en/Memoization"&gt;memoization&lt;/a&gt;.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org2918210" class="outline-2"&gt;
&lt;h2 id="org2918210"&gt;Memoize&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org2918210"&gt;
&lt;p&gt;
So, what's memoization? Is it what Elmer Fudd does when he memorizes? No, memoization comes from the latin word &lt;i&gt;memorandum&lt;/i&gt;  which means "to be remembered". What we're going to do is create a cache dictionary that will match arguments to our function call to their outputs. Then if a function call comes in that uses arguments that were used before, we can just grab it from the cache instead of re-doing the calculations.
&lt;/p&gt;

&lt;p&gt;
We're going to use a python decorator from &lt;a href="https://docs.python.org/3/library/functools.html"&gt;functools&lt;/a&gt; named &lt;code&gt;wraps&lt;/code&gt; that allows you to build a decorator that looks like the original function. It isn't necessary for the decorator to work, but it makes it look more like the original functior passed to the decorator so it's a good practice to use it.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;functools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;wraps&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;memoize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;"""Adds caching&lt;/span&gt;

&lt;span class="sd"&gt;    Args:&lt;/span&gt;
&lt;span class="sd"&gt;     function: the callable to memoize&lt;/span&gt;

&lt;span class="sd"&gt;    Returns:&lt;/span&gt;
&lt;span class="sd"&gt;     callable with caching and the original function&lt;/span&gt;
&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="n"&gt;cache&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="nd"&gt;@wraps&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wrapped&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
	&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
	    &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
	&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;wrapped&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Although it works as a decorator, since we already defined the &lt;code&gt;fibonacci&lt;/code&gt; function we can just pass it to &lt;code&gt;memoize&lt;/code&gt; to add the cache.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;fibonacci&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;memoize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Now let's see what happens. 
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;TIMER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fibonacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;actual&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
2020-11-10 15:45:08,117 graeae.timers.timer start: Started: 2020-11-10 15:45:08.117332
2020-11-10 15:45:08,118 graeae.timers.timer end: Ended: 2020-11-10 15:45:08.118691
2020-11-10 15:45:08,120 graeae.timers.timer end: Elapsed: 0:00:00.001359
354224848179261915075
&lt;/pre&gt;



&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; I originally tried renaming the memoized function, but since the recursive calls go to the original function name, this doesn't produce and improved function. You have to use the same name as you did when you defined the function.
&lt;/p&gt;

&lt;p&gt;
So memoization really helps, even more than you might expect. The reason why is that the first recursion term (&lt;code&gt;fibonacci(n - 1)&lt;/code&gt;) gets evaluated first, so each recursive call goes backwards by one until it hits the base-case where &lt;code&gt;n &amp;lt; 2&lt;/code&gt; and then all the rest of the calls are evaluated, but after one run through the indexes you've already hit all the cases you need for these other calls so rather than making more recursive calls, everything gets pulled from the cache.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orge65b41a" class="outline-2"&gt;
&lt;h2 id="orge65b41a"&gt;Once Again With Python&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orge65b41a"&gt;
&lt;p&gt;
As is often the case, when you implement something useful in python you'll find that it's already been implemented, in this case as part of the python standard library.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;functools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;lru_cache&lt;/span&gt;

&lt;span class="nd"&gt;@lru_cache&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;maxsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fib_o_nacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="sd"&gt;"""Calculates the n-indexed fibonacci number&lt;/span&gt;

&lt;span class="sd"&gt;    Args:&lt;/span&gt;
&lt;span class="sd"&gt;     n: the index of the number in the (zero-based) sequence to get&lt;/span&gt;

&lt;span class="sd"&gt;    Returns:&lt;/span&gt;
&lt;span class="sd"&gt;     the nth fibonacci number&lt;/span&gt;
&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
	&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;fib_o_nacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;fib_o_nacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; in python 3.9 there is a &lt;code&gt;cache&lt;/code&gt; decorator that is the same thing as the &lt;code&gt;lru_cache&lt;/code&gt; with &lt;code&gt;maxsize=None&lt;/code&gt; but I'm running this on python 3.8 right now so I can't use it.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;TIMER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fib_o_nacci&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
2020-11-09 21:53:19,405 graeae.timers.timer start: Started: 2020-11-09 21:53:19.405955
2020-11-09 21:53:19,407 graeae.timers.timer end: Ended: 2020-11-09 21:53:19.407891
2020-11-09 21:53:19,409 graeae.timers.timer end: Elapsed: 0:00:00.001936
139423224561697880139724382870407283950070256587697307264108962948325571622863290691557658876222521294125
&lt;/pre&gt;


&lt;p&gt;
Okay, so, I think it works, although I'm not checking the values, the speed seems to be an improvement.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>algorithms</category><category>recursion</category><guid>https://necromuralist.github.io/posts/memoization-and-the-fibonacci-sequence/</guid><pubDate>Tue, 10 Nov 2020 02:32:31 GMT</pubDate></item><item><title>Brute Force Longest Non-Decreasing Sub-Sequence</title><link>https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/#org63992bc"&gt;The Problem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/#org3494f35"&gt;Brute Force&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/#orgfc62dcc"&gt;Example One&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/#org4d04dd2"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org63992bc" class="outline-2"&gt;
&lt;h2 id="org63992bc"&gt;The Problem&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org63992bc"&gt;
&lt;p&gt;
The problem at hand is that we're given a sequence and we want to find the longest combination we can find in it that is non-decreasing (each element after the first is greater than or equal to the previous element).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3494f35" class="outline-2"&gt;
&lt;h2 id="org3494f35"&gt;Brute Force&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org3494f35"&gt;
&lt;p&gt;
This will be a brute-force solution using nested for-loops. This will use the &lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/"&gt;itertools.combinations&lt;/a&gt; function to generate the candidate solutions.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;brute_force&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;tuple&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="sd"&gt;"""Finds the longest non-decreasing sub-sequence&lt;/span&gt;

&lt;span class="sd"&gt;    Args:&lt;/span&gt;
&lt;span class="sd"&gt;     sequence: the source collection of items&lt;/span&gt;

&lt;span class="sd"&gt;    Returns:&lt;/span&gt;
&lt;span class="sd"&gt;      the longest non-decreasing sub-sequence in the sequence, number of for-loops&lt;/span&gt;
&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
	&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
	&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;sub_sequence&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
	    &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
	    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sub_sequence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sub_sequence&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
		&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;sub_sequence&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Here's what it's doing.
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;The outer loop counts down from the length of the sequence to zero.&lt;/li&gt;
&lt;li&gt;The inner loop generates combinations of the current length in the outer loop&lt;/li&gt;
&lt;li&gt;If the &lt;code&gt;sub_sequence&lt;/code&gt; is in sorted (non-decreasing) order then it is as long or longer than any other non-decreasing sub-sequence so choose it as the longest sub-sequence.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgfc62dcc" class="outline-3"&gt;
&lt;h3 id="orgfc62dcc"&gt;Example One&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgfc62dcc"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;actual&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;brute_force&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;actual&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;actual&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
(1, 2, 4)
18
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-org4d04dd2" class="outline-2"&gt;
&lt;h2 id="org4d04dd2"&gt;End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org4d04dd2"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;From &lt;a href="https://necromuralist.github.io/posts/python-algorithms/"&gt;Python Algorithms&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>algorithms</category><category>python</category><guid>https://necromuralist.github.io/posts/brute-force-longest-non-decreasing-sub-sequence/</guid><pubDate>Tue, 10 Nov 2020 01:32:26 GMT</pubDate></item><item><title>Python Itertools Combinations</title><link>https://necromuralist.github.io/posts/python-itertools-combinations/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/#orga357774"&gt;What?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/#orgb2e88f6"&gt;Okay, but what?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/#orgf8f43ed"&gt;A Count Function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/#org3dfc5a8"&gt;Example One&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/python-itertools-combinations/#orgfb690e0"&gt;Example Two&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orga357774" class="outline-2"&gt;
&lt;h2 id="orga357774"&gt;What?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orga357774"&gt;
&lt;p&gt;
This is a brief note on the  python &lt;a href="https://docs.python.org/3/library/itertools.html#itertools.combinations"&gt;itertools.combinations&lt;/a&gt; function.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;combinations&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
To make sure it's behaving the way I think it will I'll also use some other built-ins.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;comb&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;n_choose_k&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb2e88f6" class="outline-2"&gt;
&lt;h2 id="orgb2e88f6"&gt;Okay, but what?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgb2e88f6"&gt;
&lt;p&gt;
The &lt;code&gt;combinations&lt;/code&gt; function takes two arguments:
&lt;/p&gt;

&lt;ul class="org-ul"&gt;
&lt;li&gt;iterable: the source that you want to make combinations from&lt;/li&gt;
&lt;li&gt;r: the length of the sequences you want to make&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;
It returns all the r-length subsequences in the iterable (&lt;a href="https://www.wikiwand.com/en/Combination"&gt;combinations&lt;/a&gt;).
&lt;/p&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgf8f43ed" class="outline-3"&gt;
&lt;h3 id="orgf8f43ed"&gt;A Count Function&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgf8f43ed"&gt;
&lt;p&gt;
The number of combinations of length &lt;i&gt;k&lt;/i&gt; for a sequence of length &lt;i&gt;n&lt;/i&gt; is the &lt;a href="https://www.wikiwand.com/en/Binomial_coefficient"&gt;Binomial Coefficient&lt;/a&gt;.
&lt;/p&gt;

\begin{align}
\binom{n}{k} &amp;amp;= \frac{n(n-1) \cdots (n - k + 1)}{k(k-1) \cdots 1}\\
&amp;amp;= \frac{n!}{k!(n-k)!}
\end{align}

&lt;p&gt;
I originally implemented a function for this but it turns out it got added to python as of 3.8 (&lt;a href="https://docs.python.org/3/library/math.html#number-theoretic-and-representation-functions"&gt;number-theoretic functions&lt;/a&gt;). Here's my translation for reference. The calculation is actually really fast so you don't gain a lot from these toy problems using the standard library, but since it's there, why not?
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;n_choose_k_one&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="sd"&gt;"""The Binomial Coefficient&lt;/span&gt;

&lt;span class="sd"&gt;    Args:&lt;/span&gt;
&lt;span class="sd"&gt;     n: the length of the source set&lt;/span&gt;
&lt;span class="sd"&gt;     k: the length of the combinations&lt;/span&gt;

&lt;span class="sd"&gt;    Returns:&lt;/span&gt;
&lt;span class="sd"&gt;     the number of combinations in the sequence&lt;/span&gt;
&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;factorial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org3dfc5a8" class="outline-3"&gt;
&lt;h3 id="org3dfc5a8"&gt;Example One&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org3dfc5a8"&gt;
&lt;p&gt;
This is given as an example in the documentation.
&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;EXPECTEDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"AB AC AD BC BD CD"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;SOURCE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"ABCD"&lt;/span&gt;
&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;combination&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;SOURCE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;EXPECTEDS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;" - &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;combination&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;combination&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;

&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SOURCE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;n_choose_k&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
- ('A', 'B')
- ('A', 'C')
- ('A', 'D')
- ('B', 'C')
- ('B', 'D')
- ('C', 'D')
&lt;/pre&gt;


&lt;p&gt;
Note that it treated the string as a sequence and returns a tuple, not a sub-string. Also note that it doesn't swap orders, so "D" is never a first entry, for instance.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgfb690e0" class="outline-3"&gt;
&lt;h3 id="orgfb690e0"&gt;Example Two&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgfb690e0"&gt;
&lt;p&gt;
This one is also from the documentation.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;SOURCE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SOURCE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;EXPECTEDS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
	     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
	     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
	     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;combination&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;combinations&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SOURCE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;EXPECTEDS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;combination&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;combination&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt;

&lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;n_choose_k&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
(0, 1, 2)
(0, 1, 3)
(0, 2, 3)
(1, 2, 3)
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>python</category><category>slip note</category><category>standard library</category><guid>https://necromuralist.github.io/posts/python-itertools-combinations/</guid><pubDate>Tue, 10 Nov 2020 00:11:26 GMT</pubDate></item><item><title>Python Algorithms</title><link>https://necromuralist.github.io/posts/python-algorithms/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="outline-container-org78bfefc" class="outline-2"&gt;
&lt;h2 id="org78bfefc"&gt;Citation&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org78bfefc"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;Hetland ML. Python Algorithms: mastering basic algorithms in the python language. New York, N.Y: Apress; 2010. 316 p. (Expert’s voice in open source).&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf9bd724" class="outline-2"&gt;
&lt;h2 id="orgf9bd724"&gt;Notes&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgf9bd724"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a href="https://github.com/apress/python-algorithms-14"&gt;GitHub Repository&lt;/a&gt; for code in the book.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>algorithms</category><category>bibliography</category><category>python</category><guid>https://necromuralist.github.io/posts/python-algorithms/</guid><pubDate>Mon, 09 Nov 2020 23:13:36 GMT</pubDate></item><item><title>Changing the Firefox Reader Font</title><link>https://necromuralist.github.io/posts/changing-the-firefox-reader-font/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#orgb927061"&gt;What is this about?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#orgc588295"&gt;So how do you do it?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#orga145851"&gt;Creating the &lt;code&gt;chrome&lt;/code&gt; Folder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#org0f3cc82"&gt;userContent.css&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#org7601dba"&gt;Enable It&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#org5933022"&gt;Oh, and just one more thing…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/#orgb2b9f41"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb927061" class="outline-2"&gt;
&lt;h2 id="orgb927061"&gt;What is this about?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgb927061"&gt;
&lt;p&gt;
I've been trying for a while now to figure out how to change the Firefox Reader font. The default (serifed-font) is Georgia, which is nice enough, but I like to change things up now and again. I would sometimes just edit the CSS in the Developer's Tools, but I finally stumbled upon how to do it so I'll save it here for my future self.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgc588295" class="outline-2"&gt;
&lt;h2 id="orgc588295"&gt;So how do you do it?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgc588295"&gt;
&lt;p&gt;
The procedure is pretty simple, this is it in outline:
&lt;/p&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;Create the &lt;code&gt;chrome&lt;/code&gt; folder for it if it doesn't exist.&lt;/li&gt;
&lt;li&gt;Enable the use of this folder.&lt;/li&gt;
&lt;li&gt;Find the CSS you want to change.&lt;/li&gt;
&lt;li&gt;Add a &lt;code&gt;userContent.css&lt;/code&gt; file to the &lt;code&gt;chrome&lt;/code&gt; folder and add the CSS you want to use to it.&lt;/li&gt;
&lt;li&gt;Restart Firefox&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id="outline-container-orga145851" class="outline-3"&gt;
&lt;h3 id="orga145851"&gt;Creating the &lt;code&gt;chrome&lt;/code&gt; Folder&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orga145851"&gt;
&lt;p&gt;
The configuration files you create go into a &lt;a href="http://kb.mozillazine.org/Chrome_folder"&gt;folder named "chrome"&lt;/a&gt;. Firefox used to create it for you with example files but doesn't anymore so if you haven't created one you'll have to do so now - but where? It goes into your "profile" folder, but since you can have multiple configurations the path isn't fixed. There's multiple ways listed to find it on the Firefox &lt;a href="http://kb.mozillazine.org/Profile_folder_-_Firefox"&gt;Profile folder&lt;/a&gt; page. The way I did it was to enter &lt;code&gt;about:support&lt;/code&gt; in the address bar.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/about-support-address-bar.webp"&gt;

&lt;p&gt;
This brings up the Troupbleshooting Information page.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/about-support.webp"&gt;

&lt;p&gt;
The bottom of the screenshot is what we want.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/profile-directory.webp"&gt;

&lt;p&gt;
The path displayed is your profile folder (&lt;code&gt;/home/athena/.mozilla/firefox/j3hyuwod.default-1603227893962&lt;/code&gt;). You can click on the Open Directory button to open it with the GUI or use the path to navigate to it from your text editor. Within that folder create a folder named &lt;code&gt;chrome&lt;/code&gt;. Why &lt;i&gt;chrome&lt;/i&gt; when this is firefox? Chrome is apparently &lt;a href="https://developer.mozilla.org/en-US/docs/Glossary/Chrome"&gt;not related to google's chrome&lt;/a&gt;, but, &lt;a href="http://www.catb.org/~esr/jargon/html/C/chrome.html"&gt;according to Eric S. Raymond&lt;/a&gt; (and &lt;a href="https://www.wikiwand.com/en/Graphical_user_interface"&gt;Wikipedia&lt;/a&gt;, etc.) refers to the GUI, or at least some aspects of it. Anyway.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org0f3cc82" class="outline-3"&gt;
&lt;h3 id="org0f3cc82"&gt;userContent.css&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org0f3cc82"&gt;
&lt;p&gt;
In the &lt;code&gt;chrome&lt;/code&gt; folder create a file named &lt;code&gt;userContent.css&lt;/code&gt; (here's &lt;a href="http://kb.mozillazine.org/index.php?title=UserContent.css&amp;amp;printable=yes"&gt;a mozillaZine article&lt;/a&gt; with some information about it) and add your CSS. Looking in the Firefox Inspector with the Reader View open it looks like it just uses the defaults.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/body-serif.webp"&gt;

&lt;p&gt;
But I don't want to change it for every web page so I added it to the &lt;code&gt;.moz-reader-content&lt;/code&gt; selector.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;moz-reader-content&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="k"&gt;font-family&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"TeX Gyre Pagella"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Gentium&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Which I also found using the Firefox Inspector.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org7601dba" class="outline-3"&gt;
&lt;h3 id="org7601dba"&gt;Enable It&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org7601dba"&gt;
&lt;p&gt;
So, you might think that we're done, right? But it turns out that even though Firefox gives you the ability to add custom CSS it doesn't load it by default. I couldn't find anything on the mozillaZine site about how to enable it (although it might be there, I just didn't find it), but there's a www.userchrome.org site that has a &lt;a href="https://www.userchrome.org/how-create-userchrome-css.html"&gt;page on setting up userChrome.css&lt;/a&gt; (which also talks about creating the &lt;code&gt;chrome&lt;/code&gt; folder). &lt;code&gt;userChrome.css&lt;/code&gt; is how you can style the Firefox GUI itself (the chrome) so in this case anything specific to that file isn't relevant, but the rest of the page is.
&lt;/p&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5513e56" class="outline-4"&gt;
&lt;h4 id="org5513e56"&gt;The Steps&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org5513e56"&gt;
&lt;p&gt;
First navigate to &lt;code&gt;about:config&lt;/code&gt;.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/about-config.webp"&gt;

&lt;p&gt;
If you hadn't previously unchecked the &lt;i&gt;Warn me when I attempt to access these preferences&lt;/i&gt; button you'll be greeted with a warning page.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/proceed-with-caution.webp"&gt;

&lt;p&gt;
Once you click on &lt;i&gt;Accept the Risk and Continue&lt;/i&gt; or just hit enter, depending on your setup, you'll get to the Advanced Preferences page.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/advanced-preferences.webp"&gt;

&lt;p&gt;
In the search box at the top of the page type in &lt;code&gt;userprof&lt;/code&gt;.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/userprof.webp"&gt;

&lt;p&gt;
If it's already set to &lt;code&gt;true&lt;/code&gt; then you're all set, otherwise click on the toggle button on the right side.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/toggle.webp"&gt;

&lt;p&gt;
This should flip it from &lt;code&gt;false&lt;/code&gt; to &lt;code&gt;true&lt;/code&gt;.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/true.webp"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5933022" class="outline-3"&gt;
&lt;h3 id="org5933022"&gt;Oh, and just one more thing…&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org5933022"&gt;
&lt;p&gt;
Changing the preferences to use the stylesheet doesn't load the actual stylesheet. To actually get it all working restart Firefox and try out the reader on a page.
&lt;/p&gt;

&lt;p&gt;
In my case it changed the &lt;a href="https://en.wikipedia.org/wiki/Rhetorica_ad_Herennium?oldformat=true"&gt;Wikipedia page on Rhetorica ad Herennium&lt;/a&gt; from this.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/default-text.webp"&gt;

&lt;p&gt;
To this.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/palladio-content.webp"&gt;

&lt;p&gt;
Not that dramatic in this case, but I still haven't found my favorite font. Also only the content was changed, not the headers… I'll have to look into that. Anyway, if you look in the Inspector the new CSS should show up.
&lt;/p&gt;

&lt;img src="https://necromuralist.github.io/posts/changing-the-firefox-reader-font/moz-reader-content.webp"&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgb2b9f41" class="outline-2"&gt;
&lt;h2 id="orgb2b9f41"&gt;End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgb2b9f41"&gt;
&lt;p&gt;
So, that's one way to change the font for the Firefox Reader. Not exciting, but finding out how to do it was hard enough that I thought I should note it for later.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>css</category><category>firefox</category><category>how-to</category><guid>https://necromuralist.github.io/posts/changing-the-firefox-reader-font/</guid><pubDate>Sun, 08 Nov 2020 22:16:45 GMT</pubDate></item><item><title>Javascript in Org-Babel</title><link>https://necromuralist.github.io/posts/javascript-in-org-babel/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org779789e"&gt;Beginning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org5d4687f"&gt;Middle&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#orgaf24453"&gt;Prerequites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org39e5e36"&gt;init.el&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#org78e2fd9"&gt;Try It&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/javascript-in-org-babel/#orgcaf59fd"&gt;End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org779789e" class="outline-2"&gt;
&lt;h2 id="org779789e"&gt;Beginning&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org779789e"&gt;
&lt;p&gt;
This is a test of running javascript in org-babel blocks. For some reason I couldn't find any documentation about setting it up so this is also a place for me to collect what to do.
&lt;/p&gt;

&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; I actually did use &lt;a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-js.html"&gt;this org-babel page&lt;/a&gt; for some of it, but it wasn't enough for me to really figure out what was going on.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5d4687f" class="outline-2"&gt;
&lt;h2 id="org5d4687f"&gt;Middle&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org5d4687f"&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgaf24453" class="outline-3"&gt;
&lt;h3 id="orgaf24453"&gt;Prerequites&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-orgaf24453"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org8f4c48f" class="outline-4"&gt;
&lt;h4 id="org8f4c48f"&gt;Node&lt;/h4&gt;
&lt;div class="outline-text-4" id="text-org8f4c48f"&gt;
&lt;p&gt;
Since javascript is an interpreted language you need an interpreter to run code blocks. Org-babel assumes you're using &lt;a href="https://nodejs.org/en/"&gt;node.js&lt;/a&gt; so you need to install it and make sure it's on the &lt;code&gt;PATH&lt;/code&gt;. They do support debian-based systems (including Ubuntu, which I use) but they don't use the traditional PPA system. Instead they have different installs for the different versions - but they do have a Long-Term Support (LTS) version which I'm hoping updates so that's what I installed.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;curl -sL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
As of this writing it install version 12.19.0, versus the Ubuntu 20.04 version of 10.19.0.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org39e5e36" class="outline-3"&gt;
&lt;h3 id="org39e5e36"&gt;init.el&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org39e5e36"&gt;
&lt;p&gt;
Besides installing node you have to make sure that you add &lt;code&gt;js&lt;/code&gt; to your org-babel set up.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(org-babel-do-load-languages
 'org-babel-load-languages
 '((js . t)))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
If you already have other languages added this just goes in the same block.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;(org-babel-do-load-languages
 'org-babel-load-languages
 '((plantuml . t)
   (shell . t)
   (emacs-lisp . t)
   (latex . t)
   (ditaa . t)
   (js . t)
   (python . t)
   (jupyter . t)
   ))
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org78e2fd9" class="outline-3"&gt;
&lt;h3 id="org78e2fd9"&gt;Try It&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org78e2fd9"&gt;
&lt;p&gt;
Now that it's set up you can execute javascript in org-babel code blocks, designating them as &lt;code&gt;js&lt;/code&gt; blocks (e.g. &lt;code&gt;#+begin_src js :results output :exports both&lt;/code&gt;).
&lt;/p&gt;

&lt;p&gt;
Here's a simple output block.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"test"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
test
&lt;/pre&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'apple'&lt;/span&gt;
&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'banana'&lt;/span&gt;
&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
apple
applebanana
&lt;/pre&gt;


&lt;p&gt;
One thing to note is that this doesn't seem create sessions that persist across blocks. Even though I defined &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; in the previous block, this next block raises an error because it doesn't think I've defined &lt;code&gt;y&lt;/code&gt;.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
If you try and put a session argument in the org-babel header you'll get a message saying "Session evaluation with node.js not supported". According to the &lt;a href="https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-js.org.html"&gt;org-babel-js documentation&lt;/a&gt; you can put in special headers to run the code in an alternate REPL, but I tried it and the output ends up in a separate buffer rather than showing up in the org-document, which seems to kind of lessen the usefulness of it. Also the js-comint version dumps extra text into the REPL as well.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgcaf59fd" class="outline-2"&gt;
&lt;h2 id="orgcaf59fd"&gt;End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgcaf59fd"&gt;
&lt;p&gt;
Okay, so this was a very basic hello world for javascript in emacs. The lack of sessions is kind of disappointing, but I don't know how useful this is going to be, anyway, since javascript is so tied to the browser, but there it is.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>emacs</category><category>javascript</category><category>org</category><guid>https://necromuralist.github.io/posts/javascript-in-org-babel/</guid><pubDate>Sat, 17 Oct 2020 03:48:55 GMT</pubDate></item></channel></rss>