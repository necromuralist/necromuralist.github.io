<html><body><span style="font-family: inherit;">I spent most of yesterday troubleshooting someone else's code and I found these commands useful (among others - these are just the ones that I had to look up).</span><br><span style="font-family: inherit;"><br></span><h3><span style="font-family: inherit;">Occur</span></h3><span style="font-family: inherit;">One problem that I ran across was that there were around two dozen class definitions, all of which were similar so the bugs that were in one tended to be in all the other classes as well. I found that using the <span style='font-family: "Courier New",Courier,monospace;'>M-x occur</span> command was useful for looking at all instances of certain lines, so I could search for things that were common among all the class definitions (<span style='font-family: "Courier New",Courier,monospace;'>occur</span> is aliased by the <span style='font-family: "Courier New",Courier,monospace;'>list-matching-lines</span> command).</span><br><br><span style="font-family: inherit;">At one point, for instance, I thought that two class names looked the same, so I guessed that whoever wrote the code probably lost track of the classes that they had defined and duplicated (at least) one of them. To check I entered:</span><br><br><span style="font-family: inherit;"><span style='font-family: "Courier New",Courier,monospace;'>M-x occur class</span> </span><br><br><span style="font-family: inherit;">Which brought up a list of lines that had the word 'class' in them and found that they had indeed duplicated that class definition. The argument 'class' is a regular expression so if there were other places where the word 'class' was used (e.g. in a nested class or a comment), you could add a start of line character:</span><br><br><span style="font-family: inherit;"> <span style='font-family: "Courier New",Courier,monospace;'>M-x occur ^class</span></span><br><span style="font-family: inherit;">  </span><br>This would only bring up lines that started with the work 'class'. <h3><span style="font-family: inherit;">Hide-show </span></h3>This is an emacs mode that I keep rediscovering so I figured I should write it down. This mode enables code-folding (since I program in python this means hiding code that is indented.<br><br>If, for example, you had these class definition:<br><br><pre name="class-test" class="brush: python"><br>class Test(object):<br>     def __init__(self, x):<br>         self.x = x<br><br>class TestTest(Test):<br>    def __init__(self, y, *args, **kwargs):<br>         super(TestTest, self).__init__(*args, **kwargs)<br>         self.y = y<br></pre><br>After you folded it you would see:<br><br><pre name="class-test-folded" class="brush: python"><br>class Test(object): <br><br>class TestTest(Test):<br></pre><br><br><br>To enable hide-show for the buffer you're in:<br><br><span style='font-family: "Courier New",Courier,monospace;'>M-x hs-minor-mode</span><br><br>But in my case I want it to always be on when I'm editing a python file so I added this to my ~/.emacs.d/init.el file:<br><br><span style='font-family: "Courier New",Courier,monospace;'>(defun turn-on-hideshow () (hs-minor-mode 1))<br>(add-hook 'python-mode-hook 'turn-on-hideshow)</span><br><br>I don't know why but emacs doesn't seem to have a way to automatically associate minor-modes with file-extensions so the work-around is to first define a function that turns on the minor mode (called 'turn-on-hideshow' in this case) and then add it to the hook of the major-mode ('python-mode-hook' in this case). Once you have hideshow working, you have a few options available to you (see <a href="http://www.emacswiki.org/emacs/HideShow" target="_blank">the wiki</a>) but I only use three of them most of the time.<br><br>The main trigger for 'hs-minor-mode' is <span style='font-family: "Courier New",Courier,monospace;'>C-c @</span> which you follow with the actual command. For instance, to hide (fold) everything that isn't flush-left:<br><br><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-M-H</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>which translates to <span style='font-family: "Courier New",Courier,monospace;'>control-c, @, control-alt-shift-h</span> ('H' is for hide).</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>The opposite (show all the hidden text) is:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-M-S</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>The only other command that I use a lot (so far) is toggle block:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-c</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>What this does is  toggle the block where your cursor is currently located. A block is the line that is flush left and all the lines that follow it that are indented. So, if you have multiple classes and functions defined, each one of them would be a block. If the block you're at isn't folded, then entering <span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-c</span> will hide the indented lines and if they are already hidden then it will un-hide them.</span></span></span><br><h3><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Paragraph Navigation </span></span></span></h3><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>This is one of those things that you learn when you first go through the emacs tutorial, but somehow I always forget it - emacs will jump between paragraphs (it uses newlines so it doesn't work quite right for code, but works for expository text). </span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>To jump to the previous paragraph:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>M-x {</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>To go to the next paragraph:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>M-x }</span><br><br><h3><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'> How I Used It</span></span></span></h3><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'> I don't want to share the code (since it wasn't mine) but in a nutshell what I faced was a file with a couple-dozen class definitions (this was a django-<a href="https://factoryboy.readthedocs.org/en/latest/" target="_blank">factory-boy</a> module so each model (database table) had two classes, a straight factory and a fuzzy version), so the first thing I did was fold all the classes to make it easier to get a high-level view:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-M-H</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Then I noticed the duplicate class names so I listed all the classes that had that name:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>M-x occur class &lt;class name&gt;</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Occur gives you the line numbers so you can jump right to the line (although if the line is within a folded block you have to un-fold it first) so I created two windows:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>C-x 2</span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Then I jumped to the starting line of the first definition  in the first window (line 5 in this example) and un-hid it:</span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'>M-g-g 5</span><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-c</span> </span></span></span><br><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Then navigated to the other window and jumped to the starting line of  the second definition (line 50 in this example) and un-hid it:</span></span></span><br><span style='font-family: "Courier New",Courier,monospace;'><br></span><span style='font-family: "Courier New",Courier,monospace;'>C-x o</span><br><span style='font-family: "Courier New",Courier,monospace;'>M-g-g 50</span><br><span style='font-family: "Courier New",Courier,monospace;'>C-c @ C-c</span><br><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'><br></span></span></span><span style='font-family: "Courier New",Courier,monospace;'><span style='font-family: Times,"Times New Roman",serif;'><span style='font-family: Georgia, "Times New Roman", serif;'>Inspecting the definitions revealed that they had the same attributes but were assigned different values so I had no way of knowing which was the class definition to keep and the person who wrote them was on vacation so I decided not to fix it (I needed a different class in the module so this didn't directly affect me).</span></span></span></body></html>