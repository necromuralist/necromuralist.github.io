<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts about Docker)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/categories/cat_docker.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2024 &lt;a href="mailto:cloisteredmonkey.jmark@slmail.me"&gt;Cloistered Monkey&lt;/a&gt; 
&lt;div id="license"xmlns:cc="http://creativecommons.org/ns#" &gt;This work is licensed under
&lt;a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"&gt;CC BY 4.0
&lt;img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"&gt;
&lt;img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"&gt;&lt;/a&gt;
&lt;/div&gt;
</copyright><lastBuildDate>Tue, 28 May 2024 00:09:14 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Building a Jupyter Docker Container</title><link>https://necromuralist.github.io/posts/building-a-jupyter-docker-container/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;p&gt;This is how I built a docker container to run a jupyter server. The reason why I did it was that I wanted to isolate any non-python dependencies I needed to install, but so far I haven't done any, so this could actually be done more easily using &lt;cite&gt;virtualenv&lt;/cite&gt;, but this is a starting point.&lt;/p&gt;
&lt;section id="the-dockerfile"&gt;
&lt;h2&gt;The Dockerfile&lt;/h2&gt;
&lt;p&gt;This is the configuration for building the docker image.&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code dockerfile"&gt;&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-1" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-1" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;ubuntu:latest&lt;/span&gt;
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-2" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-2" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;WORKDIR&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;/code&lt;/span&gt;
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-3" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-3" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;update&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;upgrade
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-4" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-4" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;build-essential&lt;span class="w"&gt; &lt;/span&gt;python-dev
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-5" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-5" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;python-distribute&lt;span class="w"&gt; &lt;/span&gt;python-pip
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-6" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-6" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;--upgrade
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-7" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-7" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;ADD&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;requirements.txt&lt;span class="w"&gt; &lt;/span&gt;/code
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-8" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-8" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;requirements.txt
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-9" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-9" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;RUN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;/notebooks
&lt;a id="rest_code_707269301caf4ccea5ea25d9cebfa0ee-10" name="rest_code_707269301caf4ccea5ea25d9cebfa0ee-10" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_707269301caf4ccea5ea25d9cebfa0ee-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;CMD&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;jupyter&lt;span class="w"&gt; &lt;/span&gt;notebook&lt;span class="w"&gt; &lt;/span&gt;--no-browser&lt;span class="w"&gt; &lt;/span&gt;--ip&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.0.0.0&lt;span class="w"&gt; &lt;/span&gt;--port&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8888&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/notebooks
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class="docutils literal"&gt;FROM&lt;/code&gt; line shows that I'm building my container using an ubuntu image (the latest image). The &lt;code class="docutils literal"&gt;WORKDIR&lt;/code&gt; sets the current working directory so commands that are run will look there for files. The next set of &lt;code class="docutils literal"&gt;RUN&lt;/code&gt; lines just say to update &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;apt-get&lt;/span&gt;&lt;/code&gt; and install some basic python packages. The &lt;code class="docutils literal"&gt;ADD&lt;/code&gt; line takes the &lt;code class="docutils literal"&gt;requirements.txt&lt;/code&gt; file in the directory where I'm going to run this and put it in &lt;code class="docutils literal"&gt;/CODE&lt;/code&gt; which I pointed to with the &lt;code class="docutils literal"&gt;WORKDIR&lt;/code&gt; line. The next &lt;code class="docutils literal"&gt;RUN&lt;/code&gt; commands install my python dependencies and make a folder called &lt;code class="docutils literal"&gt;/notebooks&lt;/code&gt; to put the jupyter notebooks in. The last line (&lt;code class="docutils literal"&gt;CMD&lt;/code&gt;) is what will be executed when the container is run.&lt;/p&gt;
&lt;/section&gt;
&lt;section id="building-the-image"&gt;
&lt;h2&gt;Building the Image&lt;/h2&gt;
&lt;p&gt;If the docker-file is stored in a file named &lt;code class="docutils literal"&gt;jupyter.dockerfile&lt;/code&gt; next to the &lt;code class="docutils literal"&gt;requirements.txt&lt;/code&gt; file, both of which are in the directory where I run the build command. To build it (and name the image &lt;code class="docutils literal"&gt;jupyter&lt;/code&gt;) I'd run the command:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_88fe0684450147a7882a42e60af550de-1" name="rest_code_88fe0684450147a7882a42e60af550de-1" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_88fe0684450147a7882a42e60af550de-1"&gt;&lt;/a&gt;docker&lt;span class="w"&gt; &lt;/span&gt;-f&lt;span class="w"&gt; &lt;/span&gt;jupyter.dockerfile&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;jupyter:latest&lt;span class="w"&gt; &lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;section id="running-the-server"&gt;
&lt;h2&gt;Running the Server&lt;/h2&gt;
&lt;p&gt;To run the server in the same directory where the notebooks should be stored and using the default port of 8888:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_c7c278097212491e8b02e7886436f7e0-1" name="rest_code_c7c278097212491e8b02e7886436f7e0-1" href="https://necromuralist.github.io/posts/building-a-jupyter-docker-container/#rest_code_c7c278097212491e8b02e7886436f7e0-1"&gt;&lt;/a&gt;docker&lt;span class="w"&gt; &lt;/span&gt;--name&lt;span class="w"&gt; &lt;/span&gt;jupyter&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8888&lt;/span&gt;:8888&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$PWD&lt;/span&gt;:/notebooks&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;jupyter
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now the server should be reachable at &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;http://localhost:8888&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;/section&gt;</description><category>docker</category><category>how-to</category><category>jupyter</category><guid>https://necromuralist.github.io/posts/building-a-jupyter-docker-container/</guid><pubDate>Mon, 20 Jun 2016 03:48:21 GMT</pubDate></item><item><title>Linking Two Docker Containers</title><link>https://necromuralist.github.io/posts/linking-two-docker-containers/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;p&gt;I think this is the deprecated to do it, now that they have &lt;cite&gt;docker connect&lt;/cite&gt;, but it works, so I'll keep the notes.&lt;/p&gt;
&lt;p&gt;My goal was to link a container that I'd set up to run a &lt;cite&gt;Jupyter Notebook&lt;/cite&gt; server to a &lt;cite&gt;Mongo DB&lt;/cite&gt; server. I'll leave out the installation notes and just assume that there's a docker image named &lt;code class="docutils literal"&gt;mongo&lt;/code&gt; for &lt;cite&gt;MongoDB&lt;/cite&gt; and one named &lt;code class="docutils literal"&gt;jupyter&lt;/code&gt; for my &lt;cite&gt;Jupyter&lt;/cite&gt; server.&lt;/p&gt;
&lt;p&gt;First I'll run MongoDB. &lt;cite&gt;MongoDB&lt;/cite&gt; is going to use &lt;code class="docutils literal"&gt;/data/db&lt;/code&gt; to store its data-files so I'm going to mount my &lt;cite&gt;data&lt;/cite&gt; directory there.&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_52d387cb84a84bc79ad062461171a8fc-1" name="rest_code_52d387cb84a84bc79ad062461171a8fc-1" href="https://necromuralist.github.io/posts/linking-two-docker-containers/#rest_code_52d387cb84a84bc79ad062461171a8fc-1"&gt;&lt;/a&gt;docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;--name&lt;span class="w"&gt; &lt;/span&gt;mongo&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$PWD&lt;/span&gt;/data:/data/db&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;mongo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next I'll run the &lt;cite&gt;Jupyter&lt;/cite&gt; container, using the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;--link&lt;/span&gt;&lt;/code&gt; option to point it to the &lt;code class="docutils literal"&gt;mongo&lt;/code&gt; container. The jupyter notebook is running on port 8888 and looking for notebooks in the &lt;code class="docutils literal"&gt;/notebooks&lt;/code&gt; directory so I'll mount my current working director there.&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_2fb54eb7fe404a43a4b4410d6e27c67c-1" name="rest_code_2fb54eb7fe404a43a4b4410d6e27c67c-1" href="https://necromuralist.github.io/posts/linking-two-docker-containers/#rest_code_2fb54eb7fe404a43a4b4410d6e27c67c-1"&gt;&lt;/a&gt;docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;--name&lt;span class="w"&gt; &lt;/span&gt;jupyter&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$PWD&lt;/span&gt;:/notebooks&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8888&lt;/span&gt;:8888&lt;span class="w"&gt; &lt;/span&gt;--link&lt;span class="w"&gt; &lt;/span&gt;mongo&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;jupyter
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At this point, opening a browser at &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;http://localhost:8888&lt;/span&gt;&lt;/code&gt; should open up the jupyter-server's home.&lt;/p&gt;</description><category>docker</category><category>how-to</category><guid>https://necromuralist.github.io/posts/linking-two-docker-containers/</guid><pubDate>Mon, 20 Jun 2016 03:31:20 GMT</pubDate></item></channel></rss>