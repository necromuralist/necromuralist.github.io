<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Using the python-urwid debugger over telnet.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PuDB Remote | The Cloistered Monkey</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/posts/pudb-remote/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="manifest" href="../../site.webmanifest">
<meta name="author" content="Cloistered Monkey">
<link rel="prev" href="../emacs-artifact-on-kubuntu/" title="Emacs Scrollbar Artifact on Kubuntu" type="text/html">
<link rel="next" href="../mozilla-madness-resist-fingerprinting/" title="Mozilla Madness: Resist Fingerprinting!" type="text/html">
<meta property="og:site_name" content="The Cloistered Monkey">
<meta property="og:title" content="PuDB Remote">
<meta property="og:url" content="https://necromuralist.github.io/posts/pudb-remote/">
<meta property="og:description" content="Using the python-urwid debugger over telnet.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-11-17T18:29:13-08:00">
<meta property="article:tag" content="debugging">
<meta property="article:tag" content="pudb">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">The Cloistered Monkey</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../pages/" class="nav-link">Pages</a>
                </li>
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
            <div class="dropdown-menu">
                    <a href="https://necromuralist.github.io/Bowling-For-Data/" class="dropdown-item">Bowling For Data</a>
                    <a href="https://necromuralist.github.io/Anechoic-Echolalia/" class="dropdown-item">Anechoic Echolalia</a>
                    <a href="https://necromuralist.github.io/Ape-Iron/" class="dropdown-item">Ape Iron</a>
                    <a href="https://necromuralist.github.io/Neurotic-Networking/" class="dropdown-item">Neurotic Networking</a>
                    <a href="https://necromuralist.github.io/student_intervention/" class="dropdown-item">Student Intervention Project</a>
                    <a href="https://necromuralist.github.io/boston_housing/" class="dropdown-item">Boston Housing Project</a>
                    <a href="https://necromuralist.github.io/data_science/" class="dropdown-item">Data Science With Python</a>
                    <a href="https://necromuralist.github.io/Visions-Voices-Data/" class="dropdown-item">Visions, Voices, Data</a>
            </div>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<!-- 
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
-->
<input type="hidden" name="sitesearch" value="https://necromuralist.github.io/">
</form>
<!-- End of custom search -->


            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.org" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">PuDB Remote</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/cloistered-monkey/">Cloistered Monkey</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2021-11-17T18:29:13-08:00" itemprop="datePublished" title="2021-11-17 18:29">2021-11-17 18:29</time></a>
            </p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org02307bd">In the Beginning</a></li>
<li><a href="#org9bb7f92">Short Version</a></li>
<li><a href="#orgfaaabf1">Okay, So Now Why Would You Do This?</a></li>
<li>
<a href="#org23a4757">Dead Ends</a>
<ul>
<li><a href="#org43111af">Another Screen</a></li>
<li><a href="#orgfd32a5c"><code>term_size</code></a></li>
</ul>
</li>
<li><a href="#org9dcf1bf">Telnet</a></li>
<li><a href="#org6241b51">But It's Not Fixed?</a></li>
</ul>
</div>
</div>
<div id="outline-container-org02307bd" class="outline-2">
<h2 id="org02307bd">In the Beginning</h2>
<div class="outline-text-2" id="text-org02307bd">
<p>
This is a post on using <a href="https://documen.tician.de/pudb/index.html">PuDB</a> via telnet.
</p>
</div>
</div>

<div id="outline-container-org9bb7f92" class="outline-2">
<h2 id="org9bb7f92">Short Version</h2>
<div class="outline-text-2" id="text-org9bb7f92">
<p>
In case I forgot what to do and just want to read this to remember.
</p>

<ol class="org-ol">
<li>In the screen where you are going to run telnet, run <code>tput cols</code> and <code>tput lines</code> to find out the number of columns and lines that the screen is using.</li>
<li>In the code where you want the break, instead of the usual <code>import pudb; pudb.set_trace()</code> use:</li>
</ol>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
When the code hits the breakpoint it will start up a telnet service and you can log into it from the other screen:
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'
</module></module>
</div>
</div>

<div id="outline-container-orgfaaabf1" class="outline-2">
<h2 id="orgfaaabf1">Okay, So Now Why Would You Do This?</h2>
<div class="outline-text-2" id="text-orgfaaabf1">
<p>
I was trying to build one of my sites that uses <a href="https://nikola.readthedocs.io/en/latest/">nikola</a> and this strange error came out saying that one of the shortcodes was getting the "site" argument multiple times. I had no idea what was going on and nikola doesn't pre-define the arguments to the shortcode-plugins (it parses the text and then passes the arguments along using the <code>*args</code> <code>**kwargs</code> convention) which makes it flexible, but figuring out a problem with the arguments is pretty tough, so I decided to turn to my old standby <code>PuDB</code>, which I've been using for so many years now, and is my favorite of the python debuggers I've tried.
</p>

<p>
I did my usual thing and found the line in the <code>nikola</code> code that was raising the error and inserted a breakpoint further up in the code.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
I figured the problem was with my shortcode, named <code>lancelot</code>, and the conditional allowed me to skip all the other shortcodes being used. But then, when I ran the build (<code>nikola build -v2</code>)… disaster.
</p>

<p>
<img src="pudb-broken.png" alt="nil"></p>

<p>
For some reason it wouldn't use the entire screen, making it impossible (or at least really hard) to read some of the variables that I wanted to check - and even worse, when I tried to open up the ipython terminal in it I got an error message.
</p>

<p>
<img src="pudb-ui-exception.png" alt="nil"></p>

<p>
The error-message is one of those error-after-the-error messages that you sometimes run into. It was trying to notify me of an error by popping up some kind of dialog but then the dialog wouldn't open so it told me about the dialog error and didn't get around to telling me what the original error was. In any case, something was broken, so I had to resort to desperate measures - I went to read the documentation.
</p>

<p>
Surprisingly, <a href="https://documen.tician.de/pudb/index.html">there actually is some</a> (there wasn't really much when I first started using it).
</p>
</module>
</div>
</div>

<div id="outline-container-org23a4757" class="outline-2">
<h2 id="org23a4757">Dead Ends</h2>
<div class="outline-text-2" id="text-org23a4757">
<p>
The first couple of things I tried seemed promising, but they didn't work.
</p>
</div>

<div id="outline-container-org43111af" class="outline-3">
<h3 id="org43111af">Another Screen</h3>
<div class="outline-text-3" id="text-org43111af">
<p>
There wasn't anything about re-sizing the window, but it did mention that you can have the output come out in a different terminal from the one where you run the code, so I gave it a go. I made a different screen and got its file-path using the <code>tty</code> command (<code>/dev/pts/6</code> in this case). Then I set an environment variable to hold the file-path in the screen where I was running the code (<code>set -x PUDB_TTY /dev/pts/6</code>). This caused <code>PuDB</code> to pipe the output to the next screen - and it <i>did</i> work to send the first PuDB output to the other screen, and it <i>did</i> use the whole window, but then it quit instead of letting me use the debugger. Not <i>quite</i> what I wanted, so I unset the environment variable and moved on.
</p>
</div>
</div>
<div id="outline-container-orgfd32a5c" class="outline-3">
<h3 id="orgfd32a5c"><code>term_size</code></h3>
<div class="outline-text-3" id="text-orgfd32a5c">
<p>
The documentation also showed how to use <code>PuDB</code> as a remote debugger, and in the example they passed in the argument <code>term_size</code> to <code>set_trace</code> so I thought, since the functions have the same name, that the <code>set_trace</code> I was using would take the same arguments. So I tried it.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
Using the values that I had gotten from <a href="https://linux.die.net/man/1/tput">tput</a>  using <code>tput cols</code> and <code>tput lines</code>. But that just raised an <code>ArgumentError</code>. The functions have the same name, but not the same arguments.
</p>
</module>
</div>
</div>
</div>

<div id="outline-container-org9dcf1bf" class="outline-2">
<h2 id="org9dcf1bf">Telnet</h2>
<div class="outline-text-2" id="text-org9dcf1bf">
<p>
So then I decided to try their remote version. It doesn't really make sense to me that it would work better than the regular version, but I didn't see any other choice. So instead of the usual code to insert a breakpoint I used:
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
When I ran the build it stopped and told me to telnet into the localhost address at port 6899.
</p>

<p>
<img src="please-telnet.png" alt="nil"></p>

<p>
So I changed into the other screen and ran telnet.
</p>

Traceback (most recent call last):
  File "/home/hades/.local/bin/pygmentize", line 5, in <module>
    from pygments.cmdline import main
ModuleNotFoundError: No module named 'pygments'

<p>
And what do you know.
</p>

<p>
<img src="pudb-fixed.png" alt="nil"></p>

<p>
This turns out to not be a complete fix. Hitting <code>!</code> to get to the <code>ipython</code> terminal froze <code>PuDB</code>, but this was enough for me to inspect the variables and realize that I just needed to move one of the parameters in the definition of my shortcode method and it worked.
</p>
</module></module>
</div>
</div>

<div id="outline-container-org6241b51" class="outline-2">
<h2 id="org6241b51">But It's Not Fixed?</h2>
<div class="outline-text-2" id="text-org6241b51">
<p>
Well, if this were a more intense debug I really would want the <code>ipython~/~ptipython</code> terminal, but since this is the first time I've tried to run <code>PuDB</code> under <code>KUbuntu's</code> <code>Konsole</code> instead of the <code>GNOME</code> terminal I'm hoping that just switching back to the other terminal will be enough - I'll have to test that once I'm more motivated.
</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/debugging/" rel="tag">debugging</a></li>
            <li><a class="tag p-category" href="../../categories/pudb/" rel="tag">pudb</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../emacs-artifact-on-kubuntu/" rel="prev" title="Emacs Scrollbar Artifact on Kubuntu">Previous post</a>
            </li>
            <li class="next">
                <a href="../mozilla-madness-resist-fingerprinting/" rel="next" title="Mozilla Madness: Resist Fingerprinting!">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2023         <a href="mailto:cloisteredmonkey.jmark@slmail.me">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
