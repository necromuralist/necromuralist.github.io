<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Setting up the ubertooth on Ubuntu in 2018." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Ubertooth 2018 | The Cloistered Monkey</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../rss.xml" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/posts/ubertooth-2018/" rel="canonical"><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/latest.js?config=TeX-MML-AM_CHTML" type="text/javascript">
</script>
<meta content="Cloistered Monkey" name="author">
<link href="../downloading-video-from-the-arlo/" rel="prev" title="Downloading Video From the Arlo" type="text/html">
<link href="../python-from-g-to-whatever/" rel="next" title="Python from G to Whatever" type="text/html">
<meta content="The Cloistered Monkey" property="og:site_name">
<meta content="Ubertooth 2018" property="og:title">
<meta content="https://necromuralist.github.io/posts/ubertooth-2018/" property="og:url">
<meta content="Setting up the ubertooth on Ubuntu in 2018." property="og:description">
<meta content="article" property="og:type">
<meta content="2018-09-26T21:59:08-07:00" property="article:published_time">
<meta content="ubertooth howto bluetooth sniffer" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="https://necromuralist.github.io/"><span id="blog-title">The Cloistered Monkey</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../../rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Projects</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/In-Too-Deep/">In Too Deep (Neural Networks)</a> <a class="dropdown-item" href="../../machine-learning-projects/">Machine Learning</a> <a class="dropdown-item" href="https://necromuralist.github.io/student_intervention/">Student Intervention Project</a> <a class="dropdown-item" href="https://necromuralist.github.io/boston_housing/">Boston Housing Project</a> <a class="dropdown-item" href="https://necromuralist.github.io/data_science/">Data Science With Python</a></div>
</li>
</ul>
<!-- Google custom search -->
<form action="https://www.google.com/search" class="navbar-form navbar-right" method="get" role="search">
<div class="form-group"><input class="form-control" name="q" placeholder="Search" type="text"></div>
<!-- 
<button type="submit" class="btn btn-primary">
        <span class="glyphicon glyphicon-search"></span>
</button>
-->
<input name="sitesearch" type="hidden" value="https://necromuralist.github.io/"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href=".">Ubertooth 2018</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author"><a href="../../authors/cloistered-monkey/">Cloistered Monkey</a></span></p>
<p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-09-26T21:59:08-07:00" itemprop="datePublished" title="2018-09-26 21:59">2018-09-26 21:59</time></a></p>
<p class="sourceline"><a class="sourcelink" href="index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div class="outline-2" id="outline-container-org831bc70">
<h2 id="org831bc70">Introduction</h2>
<div class="outline-text-2" id="text-org831bc70">
<p>One of the problems of relying on search engines is that the more obscure the subject you are interested in, the greater the chance that what you'll get will be either unlocatable or outdated. These are my notes on setting up the <a href="https://github.com/greatscottgadgets/ubertooth">ubertooth</a> on an ubuntu system in September of 2018, which turned out to be a slightly different experience from what I went through earlier in this year so I thought I should try and make a record of it somewhere.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orga491769">
<h2 id="orga491769">The Current Release</h2>
<div class="outline-text-2" id="text-orga491769">
<p>The current release for the Ubertooth firmware and code is <a href="https://github.com/greatscottgadgets/ubertooth/releases/tag/2018-08-R1">2018-08-R1</a>. Download the <a href="https://github.com/greatscottgadgets/ubertooth/releases/download/2018-08-R1/ubertooth-2018-08-R1.tar.xz">ubertooth-2018-08-R1.tar.xz</a> file from that page and untar it. You will also want the matching <a href="https://github.com/greatscottgadgets/libbtbb/releases/tag/2018-08-R1">libbtb</a> code.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org336f994">
<h2 id="org336f994">Building and Installing the Code</h2>
<div class="outline-text-2" id="text-org336f994">
<p>For some reason the instructions on the home page assume you already have the code built and installed, but there's <a href="https://github.com/greatscottgadgets/ubertooth/wiki/Build-Guide">actually some previous steps you need to do</a>.</p>
</div>
<div class="outline-3" id="outline-container-org0e7ffa1">
<h3 id="org0e7ffa1">Install the Dependencies</h3>
<div class="outline-text-3" id="text-org0e7ffa1">
<pre class="example">
sudo apt install cmake libusb-1.0-0-dev make gcc g++ libbluetooth-dev \
pkg-config libpcap-dev python-numpy python-pyside python-qt4
</pre>
<p>The <code>python-&lt;packages&gt;</code> can be downloaded from pip, and you really don't need the <code>pyside</code> and <code>qt4</code> libraries unless you want to run the spectral scanner, which is kind of their hello-world, which is nice, but the pyside code is actually depracated because qt5 is the current version and it won't work with python 3.6 (the current ubuntu default) so I personally would skip it. <code>numpy</code> is always a good idea no matter what you end up doing.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org4693110">
<h3 id="org4693110">Build libbtbb</h3>
<div class="outline-text-3" id="text-org4693110">
<p><code>libbtb</code> is the Bluetooth Baseband Library which you need for ubertooth to decode bluetooth packets. Change into the folder you downloaded earlier and build and install it.</p>
<pre class="example">
mkdir build
cd build
cmake ..
make
sudo make install
</pre>
<pre class="example">
[ 88%] Built target btbb
[ 88%] Built target btaptap
[100%] Built target pcapdump
Install the project...
-- Install configuration: ""
-- Installing: /usr/local/lib/pkgconfig/libbtbb.pc
-- Installing: /usr/local/lib/libbtbb.so.1.0
-- Installing: /usr/local/lib/libbtbb.so.1
-- Installing: /usr/local/lib/libbtbb.so
-- Installing: /usr/local/include/btbb.h
running build
running build_py
running install
running install_lib
creating //usr/local/lib/python2.7/site-packages/pcapdump
copying /home/dogen/Downloads/libbtbb-2018-08-R1/build/python/pcaptools/build/lib.linux-x86_64-2.7/pcapdump/pcapdump.py -&gt; //usr/local/lib/python2.7/site-packages/pcapdump
copying /home/dogen/Downloads/libbtbb-2018-08-R1/build/python/pcaptools/build/lib.linux-x86_64-2.7/pcapdump/__init__.py -&gt; //usr/local/lib/python2.7/site-packages/pcapdump
byte-compiling //usr/local/lib/python2.7/site-packages/pcapdump/pcapdump.py to pcapdump.pyc
byte-compiling //usr/local/lib/python2.7/site-packages/pcapdump/__init__.py to __init__.pyc
running install_egg_info
Writing //usr/local/lib/python2.7/site-packages/pcapdump-0.0.0-py2.7.egg-info
-- Installing: /usr/local/bin/btaptap
</pre>
<p>Now run ldconfig.</p>
<pre class="example">
sudo ldconfig
</pre></div>
</div>
<div class="outline-3" id="outline-container-org0da6b8b">
<h3 id="org0da6b8b">Ubertooth Tools</h3>
<div class="outline-text-3" id="text-org0da6b8b">
<p>Do the same thing to build the tools. First untar the file you downloaded, change into the <code>host</code> folder (<code>ubertooth-2018-08-R1/host</code>) and build and install the code.</p>
<pre class="example">
mkdir build
cd build/
cmake ..
make
sudo make install
sudo ldconfig
</pre>
<p>You should now have some command-line tools that start with <code>ubertooth-</code> (e.g. <code>ubertooth-rx</code>).</p>
</div>
</div>
<div class="outline-3" id="outline-container-orgcda3a6c">
<h3 id="orgcda3a6c">Privileges</h3>
<div class="outline-text-3" id="text-orgcda3a6c">
<p>You can use <code>setcap</code> to make it so that you don't need to run things as root. This is how to make it so you can run <code>ubertooth-scan</code>.</p>
<pre class="example">
sudo setcap 'CAP_NET_RAW+eip CAP_NET_ADMIN+eip' (which ubertooth-scan)
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org1fd20b5">
<h2 id="org1fd20b5">Update the Firmware</h2>
<div class="outline-text-2" id="text-org1fd20b5">
<p>One of the commands installed in the previous step was <code>ubertooth-dfu</code> which is the <b>Do Firmware Update</b> command that we need to update the firmware. First insert the ubertooth USB dongle, then change into the <code>ubertooth-2018-08-R1/ubertooth-one-firmware-bin</code> folder and run the update command.</p>
<p><b>Warning:</b> According to the documentation you need to make sure to have an antenna on the ubertooth before inserting it. Also, it too a couple of attempts inserting, removing, and re-inserting the ubertooth before it worked for some reason (you can tell it's ready when there are two green LEDs and one red LED lit up).</p>
<pre class="example">
ubertooth-dfu -d bluetooth_rxtx.dfu -r
</pre>
<p>As I mentioned before, the GUI for the spectral analysis is out of date and didn't install in my setup, but you can check that the ubertooth is working by just running the spectral analysis without a GUI.</p>
<pre class="example">
ubertooth-specan
</pre>
<p>This should send a timestamp, frequency, RSSI CSV to stdout as the ubertooth sweeps the channels and shows the amount of electromagnetic radiation it sees on each.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org31f3276">
<h2 id="org31f3276">Spectools</h2>
<div class="outline-text-2" id="text-org31f3276">
<p>Since we can't run the python spectrum analyzer, we should turn to a better alternative, <a href="https://www.kismetwireless.net/spectools/">spectools</a>. This was a project to mostly re-create the <a href="https://www.metageek.com/products/wi-spy/">metageek wi-spy GUI</a> but it supports the ubertooth. It actually looks like a dead project (the last <i>News</i> item on their site was from 2012), but it works for now. Luckily ubuntu has this in the repositories so you should be able to just install it with apt.</p>
<pre class="example">
sudo apt install spectools
</pre>
<p>Once you install it you can either run <code>spectool_curses</code> which will run at the command line but only has one view, or <code>spectool_gtk</code> which will run in an X-windows environment and show three views of the 2.4 GHz spectrum.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org839baa7">
<h2 id="org839baa7">Kismet</h2>
<div class="outline-text-2" id="text-org839baa7">
<p>Now we come to the interesting installation. At this point you probably have all the command-line utilities you need, but kismet provides a convenient interface to start capturing packets. Unfortunately it is going through a major upgrade which makes it incompatible with the ubertooth plugin for it (maybe, there's two plugins and one of them might work, but they don't seem to document it (or much else, for that matter)).</p>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../categories/ubertooth-howto-bluetooth-sniffer/" rel="tag">ubertooth howto bluetooth sniffer</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../downloading-video-from-the-arlo/" rel="prev" title="Downloading Video From the Arlo">Previous post</a></li>
<li class="next"><a href="../python-from-g-to-whatever/" rel="next" title="Python from G to Whatever">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Contents © 2018 <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a></footer>
</div>
</div>
<script src="../../assets/js/all-nocdn.js">
</script><!-- fancy dates -->
<script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
</script><!-- end fancy dates -->
<script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
</script>
</body>
</html>
