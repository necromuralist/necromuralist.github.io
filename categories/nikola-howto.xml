<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts about nikola howto)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/categories/nikola-howto.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2019 &lt;a href="mailto:necromuralist@protonmail.com"&gt;Cloistered Monkey&lt;/a&gt; </copyright><lastBuildDate>Wed, 02 Jan 2019 00:34:12 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Nikola Inter-Site Links</title><link>https://necromuralist.github.io/posts/nikola-inter-site-links/</link><dc:creator>hades</dc:creator><description>&lt;div&gt;&lt;div class="section" id="background"&gt;
&lt;h2&gt;Background&lt;/h2&gt;
&lt;p&gt;While creating a bibliography using nikola I found about nikola &lt;a class="reference external" href="https://getnikola.com/path-handlers.html"&gt;path handlers&lt;/a&gt;. It allows you to make reference to other posts without needing the full address (e.g. &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;http://necromuralist.github.io/pages/nikola-inter-site-links&lt;/span&gt;&lt;/tt&gt;).&lt;/p&gt;
&lt;p&gt;Instead you can use the special &lt;cite&gt;link://&lt;/cite&gt; protocol and nikola will resolve it for you. It uses the form:&lt;/p&gt;
&lt;blockquote&gt;
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;link://&amp;lt;kind&amp;gt;/&amp;lt;name&amp;gt;/&lt;/span&gt;&lt;/tt&gt;&lt;/blockquote&gt;
&lt;p&gt;There is (of course) another form that lets you doc it using the &lt;tt class="docutils literal"&gt;:doc:&lt;/tt&gt; restructured text directive. This form is more succinct, and is what I'll probably stick with in the future. I originally went with the &lt;tt class="docutils literal"&gt;link&lt;/tt&gt; version because I thought it would work with other markup languages, but it didn't (or at least not with org-mode).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="post-paths"&gt;
&lt;h2&gt;Post-Paths&lt;/h2&gt;
&lt;p&gt;In this case I'm trying to link to another post so the link &lt;cite&gt;kind&lt;/cite&gt; is &lt;tt class="docutils literal"&gt;post_path&lt;/tt&gt;, which will resolve to either posts or pages. Because it can be either one, you need to extend the path to this form:&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_d22d2ee25bca4e0ebbb5fd009c7700e5-1"&gt;&lt;/a&gt;link://post_path/posts/&amp;lt;post-slug&amp;gt;/
&lt;/pre&gt;&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;You can get the slug in the meta-data in the post itself.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="admonition warning"&gt;
&lt;p class="first admonition-title"&gt;Warning&lt;/p&gt;
&lt;p class="last"&gt;When I forgot the last forward-slash (after the slug) nikola couldn't resolve it and returned a 404 error.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="example"&gt;
&lt;h3&gt;Example&lt;/h3&gt;
&lt;p&gt;Here's how to link to another post that I titled &lt;strong&gt;Pruning Large Files From Git with BFG&lt;/strong&gt;, with a slug of &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;pruning-large-files-from-git-with-bfg&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;pre class="code rst"&gt;&lt;a name="rest_code_c846b8abc3544dde8329fd3900fcc4a8-1"&gt;&lt;/a&gt;&lt;span class="s"&gt;`link &lt;/span&gt;&lt;span class="si"&gt;&amp;lt;link://post_path/posts/pruning-large-files-from-git-with-bfg/&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;`__&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This creates this &lt;a class="reference external" href="https://necromuralist.github.io/posts/pruning-large-files-from-git-with-bfg/"&gt;link&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="doc-role"&gt;
&lt;h2&gt;Doc Role&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.getnikola.com/handbook.html#doc"&gt;This&lt;/a&gt; is a restructured-text role that nikola supports to make it easier to install links. The previous example using this style would be done like this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;:doc:`link&lt;/span&gt; &lt;span class="pre"&gt;&amp;lt;pruning-large-files-from-git-with-bfg&amp;gt;`&lt;/span&gt;&lt;/tt&gt;&lt;/blockquote&gt;
&lt;p&gt;Which creates this &lt;a class="reference external" href="https://necromuralist.github.io/posts/pruning-large-files-from-git-with-bfg/"&gt;link&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The &lt;tt class="docutils literal"&gt;doc&lt;/tt&gt; method  seems much easier for posts, but the &lt;tt class="docutils literal"&gt;links&lt;/tt&gt; method covers many other cases and might be useful otherwise. It should be noted that both methods work for pages as well (stories), although the link version will need the path changed. In my case, all the pages are under the &lt;tt class="docutils literal"&gt;stories&lt;/tt&gt; folder so the link would be change to something like:&lt;/p&gt;
&lt;blockquote&gt;
&lt;tt class="docutils literal"&gt;`link &lt;span class="pre"&gt;&amp;lt;link://post_path/stories/story-slug/&amp;gt;`__&lt;/span&gt;&lt;/tt&gt;&lt;/blockquote&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>nikola howto</category><guid>https://necromuralist.github.io/posts/nikola-inter-site-links/</guid><pubDate>Sun, 14 Jan 2018 22:56:00 GMT</pubDate></item><item><title>Converting Nikola from a Blog to a Site</title><link>https://necromuralist.github.io/posts/converting-nikola-from-a-blog-to-a-site/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div&gt;&lt;p&gt;These are my notes on converting this site to be a web-site first (with a blog on the side). There is an official page on &lt;a class="reference external" href="https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html"&gt;creating a site instead of a blog&lt;/a&gt;, but I had a little bit of a hard time figuring out what was going on so these are the main points in case I need to do it again.&lt;/p&gt;
&lt;p&gt;In a nutshell:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;Get rid of the sub-folder argument in the &lt;tt class="docutils literal"&gt;PAGES&lt;/tt&gt; variable in &lt;tt class="docutils literal"&gt;conf.py&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;Set &lt;tt class="docutils literal"&gt;INDEX_PATH&lt;/tt&gt; to point to the &lt;cite&gt;posts&lt;/cite&gt; sub-folder&lt;/li&gt;
&lt;li&gt;Create an index page for the site.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;div class="section" id="conf-py"&gt;
&lt;h2&gt;conf.py&lt;/h2&gt;
&lt;p&gt;The main things to do are to edit the &lt;cite&gt;conf.py&lt;/cite&gt; file so that the pages you create get copied over as the root of the &lt;cite&gt;output&lt;/cite&gt; folder (instead of in a sub-folder called &lt;cite&gt;stories&lt;/cite&gt;) and moving the blog-index down into a sub-folder.&lt;/p&gt;
&lt;div class="section" id="making-pages-the-site"&gt;
&lt;h3&gt;Making 'pages' the Site&lt;/h3&gt;
&lt;p&gt;To make the pages you create the root of the site you need to change the &lt;tt class="docutils literal"&gt;PAGES&lt;/tt&gt; variable to not have a sub-folder as the target (this is the second-entry in the tuple). So if it originally was:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_d69db3ae667e44e9afa34c78c24075ca-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;PAGES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_d69db3ae667e44e9afa34c78c24075ca-2"&gt;&lt;/a&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"pages/*.rst"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"pages"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"story.tmpl"&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_d69db3ae667e44e9afa34c78c24075ca-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;You would change the second value in the tuple to an empty string:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_21a9af9c9db848d4a9d7abe7ee61c456-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;PAGES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_21a9af9c9db848d4a9d7abe7ee61c456-2"&gt;&lt;/a&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"pages/*.rst"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"story.tmpl"&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_21a9af9c9db848d4a9d7abe7ee61c456-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Now when you build the site (&lt;tt class="docutils literal"&gt;nikola build&lt;/tt&gt;) the &lt;tt class="docutils literal"&gt;output&lt;/tt&gt; folder will have your 'stories' at the top-level. This means that when you refer to pages (e.g. in the navigation configuration) you don't add 'pages/' as a prefix anymore.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="moving-the-blog-index"&gt;
&lt;h3&gt;Moving the Blog-index&lt;/h3&gt;
&lt;p&gt;Since Nikola assumes that the blog is your main-page you need to tell it to create the index in a sub-folder by setting the &lt;tt class="docutils literal"&gt;INDEX_PATH&lt;/tt&gt; to the name of the sub-folder. If, for example, the blog-posts are being put into &lt;tt class="docutils literal"&gt;posts&lt;/tt&gt;, the setting would be:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_6679cb227ff84056b19b819c8e1d6c7c-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"posts"&lt;/span&gt;
&lt;/pre&gt;&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was commented out by default so uncomment it and make the change.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="creating-the-home-page"&gt;
&lt;h2&gt;Creating the Home Page&lt;/h2&gt;
&lt;p&gt;At this point if you build the site and navigate to it you'll find that your home-page is now a directory of your &lt;tt class="docutils literal"&gt;output&lt;/tt&gt; folder. You can navigate to a page by going through the folders, but this is probably not the intended way to get around. The easiest way (that I found) to create the home-page is to create a new-page (&lt;tt class="docutils literal"&gt;nikola new_page&lt;/tt&gt;) and when prompted for a title, call it &lt;tt class="docutils literal"&gt;index&lt;/tt&gt;. This will create &lt;tt class="docutils literal"&gt;pages/index.rst&lt;/tt&gt; which you can edit to become your home page (make sure to change the title if you don't want the page headline to be 'index').&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;Some other things might need to be re-done in the &lt;tt class="docutils literal"&gt;conf.py&lt;/tt&gt; as well, since the folder structure has changed. These are only the basic steps to switch. The &lt;tt class="docutils literal"&gt;NAVIGATION_LINKS&lt;/tt&gt; in particular may need updating.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>nikola howto</category><guid>https://necromuralist.github.io/posts/converting-nikola-from-a-blog-to-a-site/</guid><pubDate>Wed, 02 Mar 2016 20:53:31 GMT</pubDate></item></channel></rss>