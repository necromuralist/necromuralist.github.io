<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>The Cloistered Monkey (Posts about nvidia)</title><link>https://necromuralist.github.io/</link><description></description><atom:link href="https://necromuralist.github.io/categories/nvidia.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2025 &lt;a href="mailto:cloisteredmonkey.jmark@slmail.me"&gt;Cloistered Monkey&lt;/a&gt; 
&lt;div id="license"xmlns:cc="http://creativecommons.org/ns#" &gt;This work is licensed under
&lt;a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"&gt;CC BY 4.0
&lt;img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"&gt;
&lt;img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"&gt;&lt;/a&gt;
&lt;/div&gt;
</copyright><lastBuildDate>Fri, 30 May 2025 20:17:26 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Fixing NVidia With Wayland on Ubuntu 24.04 (Noble Numbat)</title><link>https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents" role="doc-toc"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents" role="doc-toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#org99559d1"&gt;The Problem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#orgbce7d85"&gt;The Problems&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#org4cbaae8"&gt;WayDroid and X11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#org99d1384"&gt;The Next Problem - Sleep and Logging out&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#org5e2c9d7"&gt;No Settings&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#orgf624236"&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/#org1ca5bfb"&gt;Links&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org99559d1" class="outline-2"&gt;
&lt;h2 id="org99559d1"&gt;The Problem&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org99559d1"&gt;
&lt;p&gt;
Switching from X11 to Wayland (on &lt;b&gt;&lt;b&gt;Ubuntu 24.04 (Noble Numbat)&lt;/b&gt;&lt;/b&gt;) initially prevented launching the Settings so I went on a hunt to fix it (and here are my notes).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgbce7d85" class="outline-2"&gt;
&lt;h2 id="orgbce7d85"&gt;The Problems&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgbce7d85"&gt;
&lt;/div&gt;
&lt;div id="outline-container-org4cbaae8" class="outline-3"&gt;
&lt;h3 id="org4cbaae8"&gt;WayDroid and X11&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org4cbaae8"&gt;
&lt;p&gt;
I was poking around and saw that there was a project to run Android on PCs (among other things) called &lt;a href="https://waydro.id/"&gt;Waydroid&lt;/a&gt; so I installed it, but whenever I tried to enter the Waydroid shell
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo waydroid shell
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
I got an error saying  that the &lt;i&gt;waydroid session is stopped&lt;/i&gt;. This isn't a post about waydroid so I'll skip the troubleshooting I did, but ultimately I found an &lt;i&gt;AskUbuntu&lt;/i&gt; post from someone who ran into the same problem and found from one of &lt;a href="https://askubuntu.com/questions/1475593/how-do-i-resolve-the-waydroid-session-is-stopped-problem/#comment2597386_1478124"&gt;the comments&lt;/a&gt; that:
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
it turns out that waydroid is not compatible with X11.
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;
Maybe it's called &lt;i&gt;Waydroid&lt;/i&gt; because it needs &lt;i&gt;Wayland&lt;/i&gt;? Anyway I checked if I was using &lt;i&gt;Wayland&lt;/i&gt;:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$XDG_SESSION_TYPE&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
Which didn't show that I was (I can't remember if it showed X11 or was just empty, but it wasn't anything like "Wayland" anyway). It turned out I had chosen "Ubuntu" at the login screen, not "Ubuntu Wayland" so I logged out, switched to Wayland and then logged in. This seemed to fix the initial WayDroid problem (I got the GUI running but I still haven't finished the installation) but then another problem came up.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org99d1384" class="outline-3"&gt;
&lt;h3 id="org99d1384"&gt;The Next Problem - Sleep and Logging out&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org99d1384"&gt;
&lt;p&gt;
Having switched to Wayland I decided I needed a break. While I was away my computer went to the lock screen, as it usually does, but when I opened it back up I found that instead of just locking the screen it had actually logged me out, killing all the applications I left open and closing an encrypted mount point I had open. More searching ensued.
&lt;/p&gt;

&lt;p&gt;
Once again, someone posted a question on &lt;a href="https://askubuntu.com/questions/1482786/ubuntu-23-04-logs-me-out-arbitrarily-while-going-to-sleep-mode"&gt;&lt;i&gt;AskUbuntu&lt;/i&gt;&lt;/a&gt; that seemed to be about the same problem, the suggested answer being to disable the Screen Lock, which didn't really seem to be a good answer, but it was &lt;i&gt;an&lt;/i&gt; answer, which was one more than I started with so I decided to give it a try. But then the next problem appeared.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5e2c9d7" class="outline-3"&gt;
&lt;h3 id="org5e2c9d7"&gt;No Settings&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-org5e2c9d7"&gt;
&lt;p&gt;
When I tried to launch the settings an icon came up in the launcher like normal but the settings wouldn't come up. Okay. I'm skipping some of the intermediate searches but eventually I tried running the settings in the terminal to look for the errors.
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gnome-control-center 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
This gave an error which included "failed to create dri2 screen" so I went on a search again and found &lt;a href="https://askubuntu.com/questions/1514352/ubuntu-24-04-with-nvidia-driver-libegl-warning-egl-failed-to-create-dri2-scre"&gt;another AskUbuntu post&lt;/a&gt; with &lt;a href="https://askubuntu.com/a/1516567"&gt;a suggested answer&lt;/a&gt; - install a package:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install libnvidia-egl-wayland1
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
After logging out and logging back in the settings worked &lt;i&gt;and&lt;/i&gt; the lock screen no longer logged me out so this seems to have been the fix (for these problems, there's still some weird things going on but nothing I can't live with yet.)
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-orgf624236" class="outline-2"&gt;
&lt;h2 id="orgf624236"&gt;Conclusion&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgf624236"&gt;
&lt;p&gt;
There's an &lt;a href="https://bugs.launchpad.net/ubuntu/+source/nvidia-graphics-drivers-535/+bug/2063827"&gt;open bug on Launchpad&lt;/a&gt; (&lt;i&gt;Gnome apps segfault in Nvidia (535) Wayland sessions on Noble, but 550 works&lt;/i&gt;) which looks like it might be related to the problem I ran into. It says that upgrading the NVidia driver to 550 fixes the Gnome Settings problem but the upgrade then introduces some other errors so installing &lt;code&gt;libnvidia-egl-wayland1&lt;/code&gt; looks like the right fix. The bug was opened on April 26, 2024 so I would imagine it would effect more people, making this a high priority. Perhaps Wayland isn't widely used, at least not among nvidia users. I'm typing this in emacs and portions of the buffer are messed up, making it dangerous to use (insofar as I can't tell if the text actually exists in the document in the same place where it appears on the screen) so I'll probably go back to X11 until they get this stuff worked out, but at least it's working a little better than it was this morning.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1ca5bfb" class="outline-2"&gt;
&lt;h2 id="org1ca5bfb"&gt;Links&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org1ca5bfb"&gt;
&lt;ul class="org-ul"&gt;
&lt;li&gt;&lt;a href="https://waydro.id/"&gt;Waydroid&lt;/a&gt; : The start of the problem&lt;/li&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/1475593/how-do-i-resolve-the-waydroid-session-is-stopped-problem/"&gt;Ask Ubuntu - how do I resolve the "waydroid session is stopped" problem?&lt;/a&gt;: The First Problem&lt;/li&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/1482786/ubuntu-23-04-logs-me-out-arbitrarily-while-going-to-sleep-mode"&gt;Ask Ubuntu - "Ubuntu 23.04 logs me out arbitrarily while going to sleep mode"&lt;/a&gt;: The second problem.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/1514352/ubuntu-24-04-with-nvidia-driver-libegl-warning-egl-failed-to-create-dri2-scre"&gt;Ask Ubuntu- Ubuntu 24.04 with Nvidia driver "libEGL warning: egl: failed to create dri2 screen"&lt;/a&gt;: The solution post.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.launchpad.net/ubuntu/+source/nvidia-graphics-drivers-535/+bug/2063827"&gt;Launchpad - Gnome apps segfault in Nvidia (535) Wayland sessions on Noble, but 550 works &lt;/a&gt; : Possibly related bug.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/1999AZZAR/5c881fdaeb841fc4476259bfcc69b98c"&gt;GitHub Gist - waydroid on x11.md&lt;/a&gt; : Possible way around Wayland for Waydroid. Also has other useful notes for Waydroid.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>nvidia</category><category>ubuntu</category><category>wayland</category><guid>https://necromuralist.github.io/posts/gnome-settings-with-nvidia-and-wayland/</guid><pubDate>Sat, 03 May 2025 16:48:54 GMT</pubDate></item><item><title>Kernel Panic At the Lunar Lobster</title><link>https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents" role="doc-toc"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents" role="doc-toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#orgcada2e4"&gt;What Is This About?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#org837a1de"&gt;First Get It Working&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#org07f2575"&gt;Not a Solution But A Finger Pointing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#org3fe35bb"&gt;Blame It On the Drivers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#org42d9bab"&gt;From Nouveau To Nvidia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/#orgb63145e"&gt;And the End&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgcada2e4" class="outline-2"&gt;
&lt;h2 id="orgcada2e4"&gt;What Is This About?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgcada2e4"&gt;
&lt;p&gt;
I got a notification yesterday (May 3, 2023) that there's a new version of Ubuntu out (&lt;i&gt;Lunar Lobster - 23.04&lt;/i&gt;) so I ran &lt;code&gt;do-release-upgrade&lt;/code&gt; while watching a video (&lt;a href="https://en.wikipedia.org/wiki/An_Honest_Liar?useskin=vector"&gt;An Honest Liar&lt;/a&gt;) about James Randi. At the end of the upgrade there was some kind of error message about not being able to configure the Linux headers, which in retrospect should have worried me, but I was distracted so I just dismissed it. Then today when I booted up the computer I got an error message saying &lt;code&gt;Kernel Panic - Not syncing: VFS: Unable to mount root fs on unknown-block (0,0)&lt;/code&gt;. I managed to get it working (eventually) but now that Ubuntu's been around long enough and search engines seem to be choked with outdated answers I thought I'd document what I did in case it happens on another update.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org837a1de" class="outline-2"&gt;
&lt;h2 id="org837a1de"&gt;First Get It Working&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org837a1de"&gt;
&lt;p&gt;
The first thing I tried was to follow the answers on &lt;a href="https://askubuntu.com/questions/41930/kernel-panic-not-syncing-vfs-unable-to-mount-root-fs-on-unknown-block0-0"&gt;this Stackoverflow page&lt;/a&gt;. The only thing this did was get my computer up and running again - which is, I suppose a big thing, not to be minimized, but there's a lot of stuff on that page and the only relevant parts were:
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Reboot&lt;/li&gt;
&lt;li&gt;At the menu that comes up choose "Advanced Options for Ubuntu"&lt;/li&gt;
&lt;li&gt;Pick a prior version of the Linux kernel (5.19.26 in my case) and let it finish starting up.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org07f2575" class="outline-2"&gt;
&lt;h2 id="org07f2575"&gt;Not a Solution But A Finger Pointing&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org07f2575"&gt;
&lt;p&gt;
The first thing I tried from that page was from &lt;a href="https://askubuntu.com/a/939883"&gt;this answer&lt;/a&gt;:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo dpkg --configure -a
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
This gave me &lt;code&gt;error processing package linux-image-6.2.0-generic (--configure)&lt;/code&gt;. So I searched some more and tried the suggestion from &lt;a href="https://askubuntu.com/a/517882"&gt;this askubuntu answer&lt;/a&gt;:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo dpkg --purge linux-image-6.2.0-20-generic
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
This gives an error along the lines of "&lt;code&gt;dependency problems, not purging&lt;/code&gt;". Oi. So then I tried:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt autoremove
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
This gave me another error:
&lt;/p&gt;

&lt;p&gt;
&lt;img src="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/purge-error.webp" alt="Purge Error" loading="lazy"&gt;
&lt;/p&gt;

&lt;p&gt;
This time in the error message it said to check out &lt;code&gt;/var/lib/dkms/nvidia/510.108.03/build/make.log&lt;/code&gt; which turned out not to have any useful information (to me, anyway) but it did tell me that there was something going on with my nvidia drivers that was causing the configuration of the new Linux kernel to fail.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org3fe35bb" class="outline-2"&gt;
&lt;h2 id="org3fe35bb"&gt;Blame It On the Drivers&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org3fe35bb"&gt;
&lt;p&gt;
&lt;i&gt;"Something going on with my nvidia drivers"&lt;/i&gt; being a little too vague for me to troubleshoot, I decided to go the brute force way and uninstall the nvidia-drivers. This actually proved a little harder than I thought it would be (which seems to always be the case, maybe I'm too optimistic about this kind of stuff). Every time I tried to run
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt remove nvidia-driver-510
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;code&gt;apt&lt;/code&gt; would try and configure the Linux kernel and run into the same error that I had before and exit without uninstalling the driver. Some kind of chicken and the egg thing. So then I tried &lt;code&gt;dpkg&lt;/code&gt; instead of &lt;code&gt;apt&lt;/code&gt; first:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo dpkg --purge nvidia-driver-510
sudo apt autoremove
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
&lt;code&gt;dpkg&lt;/code&gt; managed to uninstall the driver and running &lt;code&gt;apt autoremove&lt;/code&gt; not only cleaned out the unused packages but also triggered the kernel configuration and this time… no errors.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-org42d9bab" class="outline-2"&gt;
&lt;h2 id="org42d9bab"&gt;From Nouveau To Nvidia&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org42d9bab"&gt;
&lt;p&gt;
After a reboot it started up okay and this time &lt;code&gt;uname -r&lt;/code&gt; showed that I was using the newer kernel (&lt;code&gt;6.2.0-20-generic&lt;/code&gt;). Yay. But now when I tried to re-install the nvidia drivers neither &lt;code&gt;ubuntu-drivers&lt;/code&gt; nor &lt;code&gt;apt&lt;/code&gt; seemed to know that they existed. It turns out that updating the ubuntu installation removes the proprietary drivers from the apt sources. So I launched the "Software &amp;amp; Updates" GUI.
&lt;/p&gt;

&lt;p&gt;
&lt;img src="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/software-updates.webp" alt="Software &amp;amp; Updates" loading="lazy"&gt;
&lt;/p&gt;

&lt;p&gt;
And checked the "Proprietary drivers for devices (restricted)" button.
&lt;/p&gt;

&lt;p&gt;
&lt;img src="https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/proprietary-drivers.webp" alt="Proprietary Drivers" loading="lazy"&gt;
&lt;/p&gt;

&lt;p&gt;
I chose to update the apt listing when I closed the GUI and then installed the drivers at the command line:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo ubuntu-drivers install
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And then, after another reboot, now it works (I checked with &lt;code&gt;nvidia-smi&lt;/code&gt;).
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgb63145e" class="outline-2"&gt;
&lt;h2 id="orgb63145e"&gt;And the End&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgb63145e"&gt;
&lt;p&gt;
I haven't run any tests other than using the system but this seems to have fixed the problem. Well, the problem with the kernel, updating also broke all my python virtual environments, but, oh, well, better than a kernel panic, I suppose.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>nvidia</category><category>ubuntu</category><guid>https://necromuralist.github.io/posts/kernel-panic-at-the-lunar-lobster/</guid><pubDate>Wed, 03 May 2023 23:20:07 GMT</pubDate></item><item><title>Recovering From the Ubuntu 18.10 Upgrade</title><link>https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/</link><dc:creator>Cloistered Monkey</dc:creator><description>&lt;div id="table-of-contents" role="doc-toc"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents" role="doc-toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/#orgec28258"&gt;What is this about?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/#orgdf76c7f"&gt;What didn't work?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/#org5a9e09e"&gt;What did work?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/#org1cb3817"&gt;Anything Else?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/#org59ec891"&gt;Update&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;b&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/b&gt; I had it hang again on rebooting so there's an update at the end.
&lt;/p&gt;
&lt;div id="outline-container-orgec28258" class="outline-2"&gt;
&lt;h2 id="orgec28258"&gt;What is this about?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgec28258"&gt;
&lt;p&gt;
I updated from Ubuntu 18.04 to &lt;a href="https://blog.ubuntu.com/2018/10/19/welcome-ubuntu-desktop-18-10"&gt;Ubuntu 18.10&lt;/a&gt; (Cosmic Cuttlefish) last night and upon rebooting found that I couldn't (finish rebooting, that is). In order to write this I had to recover from the problem so I don't have a screen-grab of the error, but it was basically the same one given in &lt;a href="https://askubuntu.com/questions/837143/failed-to-connect-to-lvmetad"&gt;this Stack Overflow post&lt;/a&gt;:
&lt;/p&gt;

&lt;pre class="example" id="orgaa6dd0d"&gt;
WARNING: Failed to connect to lvmetad. Falling back to device scanning.
Volume group "ubuntu-vg" not found
Cannot process volume group ubuntu-vg
WARNING: Failed to connect to lvmetad. Falling back to device scanning.
Reading all physical volumes.  This may take a while...
Found volume group "ubuntu-vg" using metadata type lvm2
WARNING: Failed to connect to lvmetad. Falling back to device scanning.
2 logical volume(s) in volume group "ubuntu-vg" now active /dev/mapper/ubuntu--vg-root: clean, 1180656/30154752 files, 16007858/120604672 blocks
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-orgdf76c7f" class="outline-2"&gt;
&lt;h2 id="orgdf76c7f"&gt;What didn't work?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-orgdf76c7f"&gt;
&lt;p&gt;
If you read the Stack Overflow post I linked to above, the solution was to downgrade the kernel version using the grub loader so, following that advice, I brought up the Grub menu by holding down the shift key while the machine booted up, then tried to move the cursor down to &lt;i&gt;Advanced&lt;/i&gt; in the menu using the arrow keys but for some reason it wouldn't move. I thought maybe it was my &lt;a href="https://ultimatehackingkeyboard.com/"&gt;Ultimate Hacking Keyboard&lt;/a&gt; so I went and grabbed my &lt;a href="http://vortexgear.tw/vortex2_2.asp?kind=47&amp;amp;kind2=225&amp;amp;kind3=&amp;amp;kind4=1043"&gt;Vortex&lt;/a&gt; keyboard instead and it still wouldn't work, and at this point some people might think that it probably was not the keyboard, but nope, I went and grabbed my &lt;a href="http://redragonusa.com/products/keyboard/K552/47"&gt;Redragon&lt;/a&gt; keyboard and all of a sudden it worked. Why did my $30 keyboard work better than my $300 keyboard? And no, I don't think I paid that much when I bought the Ultimate Hacking Keyboard (but it took something like two years to ship so I probably spent more than that in lost time). Well, anyway, it turned out that I plugged the last keyboard in the left USB slot while my other keyboards were in the right USB slot and for some reason the right slot was disabled when I went into the Grub Menu. No mention of that on Stack Overflow, unfortunately.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org5a9e09e" class="outline-2"&gt;
&lt;h2 id="org5a9e09e"&gt;What did work?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org5a9e09e"&gt;
&lt;p&gt;
While I was googling around I found &lt;a href="https://askubuntu.com/questions/969917/failed-to-connect-to-lvmetad-stuck-on-boot"&gt;this post&lt;/a&gt; on Stack Overflow where it was mentioned that the solution did mess with the kernel but it also mentions that he purged his nvidia drivers, which struck a chord with me because I've had problems with the nvidia drivers on my computer at work whenever I upgrade so I thought that maybe this might be something to check out first, before messing with the kernel. The post suggested using &lt;code&gt;ctrl-alt-f3&lt;/code&gt; to get into a terminal which didn't work for me for some reason so I used the Grub Menu instead. Here's the steps for my future self.
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Hold the shift key down while the machine boots up&lt;/li&gt;
&lt;li&gt;In the Grub Menu use the arrow keys and return to choose the &lt;i&gt;Advanced&lt;/i&gt; option&lt;/li&gt;
&lt;li&gt;Choose the &lt;code&gt;(recovery mode)&lt;/code&gt; version of the current kernel (4.18.0)&lt;/li&gt;
&lt;li&gt;In the Recovery Menu choose the &lt;code&gt;root Drop to root shell prompt&lt;/code&gt; option (you have to hit enter again at the next prompt)&lt;/li&gt;
&lt;li&gt;The file-system for Recovery Mode is in read-only mode so mount the drive with =mount –options remount,rw /" (you can do this from the Recovery Menu as well, but it's an extra step either way)&lt;/li&gt;
&lt;li&gt;Purge the drivers with &lt;code&gt;apt purge nvidia-*&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Type &lt;code&gt;exit&lt;/code&gt; then back out of Recovery Mode and finish the startup&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
I got the stuff about removing the nvidia driver from &lt;a href="https://askubuntu.com/questions/899309/ubuntu-16-04-how-to-disable-nvidia-driver-from-grub"&gt;this Stack Overflow post&lt;/a&gt;. It took a longer time than I thought it would to start up, but I'm writing this from my machine so it seems to work.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org1cb3817" class="outline-2"&gt;
&lt;h2 id="org1cb3817"&gt;Anything Else?&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org1cb3817"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ubuntu-drivers devices
&lt;/pre&gt;&lt;/div&gt;

&lt;pre class="example"&gt;
== /sys/devices/pci0000:00/0000:00:02.0/0000:01:00.0 ==
modalias : pci:v000010DEd00001402sv00001043sd00008581bc03sc00i00
vendor   : NVIDIA Corporation
model    : GM206 [GeForce GTX 950]
driver   : nvidia-driver-390 - distro non-free recommended
driver   : xserver-xorg-video-nouveau - distro free builtin

&lt;/pre&gt;


&lt;p&gt;
This card actually tended to freeze when I used the open source video drivers that come with Ubuntu so not having the Nvidia drivers seemed like a bad idea. I'm hoping that re-installing them will fix whatever bad setup values were there so I did:
&lt;/p&gt;

&lt;pre class="example" id="org58349b3"&gt;
sudo ubuntu-drivers autoinstall
&lt;/pre&gt;

&lt;p&gt;
Cross your fingers.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-org59ec891" class="outline-2"&gt;
&lt;h2 id="org59ec891"&gt;Update&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-org59ec891"&gt;
&lt;p&gt;
First, I didn't mention it above (because I hadn't noticed) but the bluetooth interface wouldn't start. The GUI actually let me click on the on-switch but nothing changed and when I looked in Journalctl I could see that it was raising errors. Even &lt;i&gt;hciconfig&lt;/i&gt; couldn't bring it up. Maddeningly, there are posts out there that showed the same errors that I saw (like &lt;a href="https://www.queryxchange.com/q/3_772706/bluetooth-problem-after-upgrade-from-ubuntu-14-to-16-04/"&gt;this one&lt;/a&gt;) but not only did none of the fixes they suggested work, but once I rebooted the problem went away, so I could have tried that before troubleshooting, and avoided all the hassle (maybe). 
&lt;/p&gt;

&lt;p&gt;
Of course, every solution creates a problem, and while rebooting fixed my bluetooth interface it also revealed that I had the same problems as before (only my Redragon keyboard really works on the Grub menu and the boot hangs after the initial login to decrypt the disk). I removed the nvidia drivers again and this time I didn't reinstall them before rebooting and now it works, but now I don't know if my GUI is going to start hanging again like it used to. Oh, well, one problem at a time.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>nvidia</category><category>repair</category><category>ubuntu</category><category>upgrade</category><guid>https://necromuralist.github.io/posts/recovering-from-the-ubuntu-1810-upgrade/</guid><pubDate>Sat, 27 Oct 2018 17:40:09 GMT</pubDate></item></channel></rss>